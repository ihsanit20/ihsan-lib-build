import{C as p,r as c,A as h,D as u}from"./index-BvY6-rbd.js";const x=p("order",()=>{const n=c([]),v=c(null),s=c(!1),l=c(null),i=h(()=>n.value.length);return{orders:n,order:v,loading:s,error:l,orderCount:i,fetchOrders:async(t={})=>{var a,r;s.value=!0,l.value=null;try{const e=new URLSearchParams(t).toString(),o=await u.get(`/orders${e?`?${e}`:""}`);n.value=o.data}catch(e){l.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch orders"}finally{s.value=!1}},fetchOrder:async t=>{var a,r;s.value=!0,l.value=null;try{const e=await u.get(`/orders/${t}`);v.value=e.data}catch(e){l.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch order"}finally{s.value=!1}},createOrder:async t=>{var a,r;s.value=!0,l.value=null;try{const e=await u.post("/orders",t);return n.value.push(e.data),e.data}catch(e){throw l.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create order",e}finally{s.value=!1}},updateOrderStatus:async(t,a)=>{var r,e;s.value=!0,l.value=null;try{const o=await u.put(`/orders/${t}/status`,a),d=n.value.findIndex(f=>f.id===t);return d!==-1&&(n.value[d].status=a.status),o.data}catch(o){throw l.value=((e=(r=o.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to update order status",o}finally{s.value=!1}},cancelOrder:async t=>{var a,r;s.value=!0,l.value=null;try{const e=await u.post(`/orders/${t}/cancel`),o=n.value.findIndex(d=>d.id===t);return o!==-1&&(n.value[o].status="Cancelled"),e.data}catch(e){throw l.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to cancel order",e}finally{s.value=!1}},deleteOrder:async t=>{var a,r;s.value=!0,l.value=null;try{await u.delete(`/orders/${t}`),n.value=n.value.filter(e=>e.id!==t)}catch(e){throw l.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete order",e}finally{s.value=!1}},fetchOrderReports:async(t={})=>{var a,r;s.value=!0,l.value=null;try{const e=new URLSearchParams(t).toString();return(await u.get(`/orders/report${e?`?${e}`:""}`)).data}catch(e){throw l.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch reports",e}finally{s.value=!1}}}});export{x as u};
