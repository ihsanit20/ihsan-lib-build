import{l as E,r as v,m as C,n as S,p as O,o as p,c as d,a as e,b as g,q as k,F as h,g as j,t as b,f as w,e as F,u as P,s as U,v as x,j as M,w as A,k as N}from"./index-Bmm_wY_4.js";import{u as R}from"./delivery-charge-r4BA_5h5.js";import{u as $}from"./order-FPwfNtt-.js";const I=E("address",()=>{const c=v([]),y=v([]),a=v([]),r=v(!1),l=v(null);async function m(){r.value=!0,l.value=null;try{const u=await C.get("/divisions");c.value=u.data}catch(u){l.value=u.message||"Failed to fetch divisions"}finally{r.value=!1}}async function s(u=null){r.value=!0,l.value=null;try{const i=await C.get("/districts",{params:{division_id:u}});y.value=i.data}catch(i){l.value=i.message||"Failed to fetch districts"}finally{r.value=!1}}async function f(u=null){r.value=!0,l.value=null;try{const i=await C.get("/areas",{params:{district_id:u}});a.value=i.data}catch(i){l.value=i.message||"Failed to fetch areas"}finally{r.value=!1}}return{divisions:c,districts:y,areas:a,loading:r,error:l,fetchDivisions:m,fetchDistricts:s,fetchAreas:f}}),B={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},T=["value"],L=["disabled"],G=["value"],Y=["disabled"],z=["value"],H={__name:"AddressSelection",props:{modelValue:{type:Object,default:()=>({division_id:"",district_id:"",area_id:""})}},emits:["update:modelValue"],setup(c,{emit:y}){const a=c,r=y,l=I(),m=v(a.modelValue.division_id),s=v(a.modelValue.district_id),f=v(a.modelValue.area_id);S(()=>{l.fetchDivisions()}),O([m,s,f],([t,o,n])=>{r("update:modelValue",{division_id:t,district_id:o,area_id:n})});const u=()=>{s.value="",f.value="",l.fetchDistricts(m.value)},i=()=>{f.value="",l.fetchAreas(s.value)};return(t,o)=>(p(),d("div",B,[e("div",null,[o[4]||(o[4]=e("label",{for:"division",class:"block text-sm font-medium"},"বিভাগ",-1)),g(e("select",{id:"division","onUpdate:modelValue":o[0]||(o[0]=n=>m.value=n),onChange:u,class:"input-1"},[o[3]||(o[3]=e("option",{value:"",disabled:""},"বিভাগ নির্বাচন করুন",-1)),(p(!0),d(h,null,j(w(l).divisions,n=>(p(),d("option",{key:n.id,value:n.id},b(n.name),9,T))),128))],544),[[k,m.value]])]),e("div",null,[o[6]||(o[6]=e("label",{for:"district",class:"block text-sm font-medium"},"জেলা",-1)),g(e("select",{id:"district","onUpdate:modelValue":o[1]||(o[1]=n=>s.value=n),onChange:i,disabled:!m.value,class:"input-1 disabled:cursor-not-allowed"},[o[5]||(o[5]=e("option",{value:"",disabled:""},"জেলা নির্বাচন করুন",-1)),(p(!0),d(h,null,j(w(l).districts,n=>(p(),d("option",{key:n.id,value:n.id},b(n.name),9,G))),128))],40,L),[[k,s.value]])]),e("div",null,[o[8]||(o[8]=e("label",{for:"area",class:"block text-sm font-medium"},"এলাকা",-1)),g(e("select",{id:"area","onUpdate:modelValue":o[2]||(o[2]=n=>f.value=n),disabled:!s.value,class:"input-1 disabled:cursor-not-allowed"},[o[7]||(o[7]=e("option",{value:"",disabled:""},"এলাকা নির্বাচন করুন",-1)),(p(!0),d(h,null,j(w(l).areas,n=>(p(),d("option",{key:n.id,value:n.id},b(n.name),9,z))),128))],8,Y),[[k,f.value]])])]))}};var q,D;function J(){if(D)return q;D=1;var c={};const y=!c.ESLINT_CONFIG_PRETTIER_NO_DEPRECATED,a=0;return q={rules:{curly:a,"no-unexpected-multiline":a,"@typescript-eslint/lines-around-comment":a,"@typescript-eslint/quotes":a,"babel/quotes":a,"unicorn/template-indent":a,"vue/html-self-closing":a,"vue/max-len":a,"@babel/object-curly-spacing":"off","@babel/semi":"off","@typescript-eslint/block-spacing":"off","@typescript-eslint/brace-style":"off","@typescript-eslint/comma-dangle":"off","@typescript-eslint/comma-spacing":"off","@typescript-eslint/func-call-spacing":"off","@typescript-eslint/indent":"off","@typescript-eslint/key-spacing":"off","@typescript-eslint/keyword-spacing":"off","@typescript-eslint/member-delimiter-style":"off","@typescript-eslint/no-extra-parens":"off","@typescript-eslint/no-extra-semi":"off","@typescript-eslint/object-curly-spacing":"off","@typescript-eslint/semi":"off","@typescript-eslint/space-before-blocks":"off","@typescript-eslint/space-before-function-paren":"off","@typescript-eslint/space-infix-ops":"off","@typescript-eslint/type-annotation-spacing":"off","babel/object-curly-spacing":"off","babel/semi":"off","flowtype/boolean-style":"off","flowtype/delimiter-dangle":"off","flowtype/generic-spacing":"off","flowtype/object-type-curly-spacing":"off","flowtype/object-type-delimiter":"off","flowtype/quotes":"off","flowtype/semi":"off","flowtype/space-after-type-colon":"off","flowtype/space-before-generic-bracket":"off","flowtype/space-before-type-colon":"off","flowtype/union-intersection-spacing":"off","react/jsx-child-element-spacing":"off","react/jsx-closing-bracket-location":"off","react/jsx-closing-tag-location":"off","react/jsx-curly-newline":"off","react/jsx-curly-spacing":"off","react/jsx-equals-spacing":"off","react/jsx-first-prop-new-line":"off","react/jsx-indent":"off","react/jsx-indent-props":"off","react/jsx-max-props-per-line":"off","react/jsx-newline":"off","react/jsx-one-expression-per-line":"off","react/jsx-props-no-multi-spaces":"off","react/jsx-tag-spacing":"off","react/jsx-wrap-multilines":"off","standard/array-bracket-even-spacing":"off","standard/computed-property-even-spacing":"off","standard/object-curly-even-spacing":"off","unicorn/empty-brace-spaces":"off","unicorn/no-nested-ternary":"off","unicorn/number-literal-case":"off","vue/array-bracket-newline":"off","vue/array-bracket-spacing":"off","vue/array-element-newline":"off","vue/arrow-spacing":"off","vue/block-spacing":"off","vue/block-tag-newline":"off","vue/brace-style":"off","vue/comma-dangle":"off","vue/comma-spacing":"off","vue/comma-style":"off","vue/dot-location":"off","vue/func-call-spacing":"off","vue/html-closing-bracket-newline":"off","vue/html-closing-bracket-spacing":"off","vue/html-end-tags":"off","vue/html-indent":"off","vue/html-quotes":"off","vue/key-spacing":"off","vue/keyword-spacing":"off","vue/max-attributes-per-line":"off","vue/multiline-html-element-content-newline":"off","vue/multiline-ternary":"off","vue/mustache-interpolation-spacing":"off","vue/no-extra-parens":"off","vue/no-multi-spaces":"off","vue/no-spaces-around-equal-signs-in-attribute":"off","vue/object-curly-newline":"off","vue/object-curly-spacing":"off","vue/object-property-newline":"off","vue/operator-linebreak":"off","vue/quote-props":"off","vue/script-indent":"off","vue/singleline-html-element-content-newline":"off","vue/space-in-parens":"off","vue/space-infix-ops":"off","vue/space-unary-ops":"off","vue/template-curly-spacing":"off",...y&&{"space-unary-word-ops":"off","generator-star":"off","no-comma-dangle":"off","no-reserved-keys":"off","no-space-before-semi":"off","no-wrap-func":"off","space-after-function-name":"off","space-before-function-parentheses":"off","space-in-brackets":"off","no-arrow-condition":"off","space-after-keywords":"off","space-before-keywords":"off","space-return-throw-case":"off","no-spaced-func":"off","indent-legacy":"off","array-bracket-newline":"off","array-bracket-spacing":"off","array-element-newline":"off","arrow-parens":"off","arrow-spacing":"off","block-spacing":"off","brace-style":"off","comma-dangle":"off","comma-spacing":"off","comma-style":"off","computed-property-spacing":"off","dot-location":"off","eol-last":"off","func-call-spacing":"off","function-call-argument-newline":"off","function-paren-newline":"off","generator-star-spacing":"off","implicit-arrow-linebreak":"off",indent:"off","jsx-quotes":"off","key-spacing":"off","keyword-spacing":"off","linebreak-style":"off","lines-around-comment":a,"max-len":a,"max-statements-per-line":"off","multiline-ternary":"off","new-parens":"off","newline-per-chained-call":"off","no-confusing-arrow":a,"no-extra-parens":"off","no-extra-semi":"off","no-floating-decimal":"off","no-mixed-operators":a,"no-mixed-spaces-and-tabs":"off","no-multi-spaces":"off","no-multiple-empty-lines":"off","no-tabs":a,"no-trailing-spaces":"off","no-whitespace-before-property":"off","nonblock-statement-body-position":"off","object-curly-newline":"off","object-curly-spacing":"off","object-property-newline":"off","one-var-declaration-per-line":"off","operator-linebreak":"off","padded-blocks":"off","quote-props":"off",quotes:a,"rest-spread-spacing":"off",semi:"off","semi-spacing":"off","semi-style":"off","space-before-blocks":"off","space-before-function-paren":"off","space-in-parens":"off","space-infix-ops":"off","space-unary-ops":"off","switch-colon-spacing":"off","template-curly-spacing":"off","template-tag-spacing":"off","wrap-iife":"off","wrap-regex":"off","yield-star-spacing":"off","react/jsx-space-before-closing":"off"}}},q}var _,V;function K(){if(V)return _;V=1;const c=J();return _={...c,rules:{...c.rules,"prettier/prettier":"off"}},_}K();const Q={class:"my-container space-y-6 py-6"},W={class:"md:col-span-4 space-y-4"},X={class:"card-bg p-4 space-y-2"},Z={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},ee={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},te={class:"card-bg p-4"},oe={class:"md:col-span-2 space-y-4"},se={class:"md:col-span-2 card-bg p-4"},ae={class:"flex justify-between"},ne={class:"flex justify-between font-bold"},fe={__name:"CheckOut",setup(c){const y=N(),a=F(),r=P(),l=R(),m=$(),s=v({user_id:"",name:"",phone:"",addressData:{division_id:"",district_id:"",area_id:""},address:"",alt_phone:"",delivery_charge:0,payment_method:"Cash"});S(()=>{const i=r.user;i&&(s.value.user_id=i.id,s.value.name=i.name||"",s.value.phone=i.phone||""),l.fetchDeliveryCharge()});const f=U(()=>Number(s.value.addressData.district_id)===47?l.insideCity:l.outsideCity),u=async()=>{if(!s.value.user_id||!s.value.name||!s.value.phone||!s.value.address){alert("Please fill all required fields.");return}if(!s.value.addressData.area_id){alert("Please select an area.");return}s.value.delivery_charge=f.value;const i=a.cartItems.map(o=>({product_id:o.id,quantity:o.quantity,price:o.selling_price}));if(i.length===0){alert("Your cart is empty.");return}const t={...s.value,products:i};try{await m.onlineOrder(t),alert("Order placed successfully!"),a.clearCart(),y.push({name:"MyOrders"})}catch{alert("Failed to place order.")}};return(i,t)=>(p(),d("div",Q,[t[19]||(t[19]=e("h1",{class:"title-lg"},"অর্ডার নিশ্চিত করুন",-1)),e("form",{onSubmit:A(u,["prevent"]),class:"grid grid-cols-1 gap-4 md:grid-cols-6"},[e("div",W,[e("div",X,[t[10]||(t[10]=e("h2",{class:"title-md text-center"},"কুরিয়ার ঠিকানা",-1)),e("div",Z,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium"},"নাম",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.name=o),type:"text",class:"input-1",placeholder:"Enter your name",required:""},null,512),[[x,s.value.name]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium"},"ফোন",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.phone=o),type:"text",class:"input-1",placeholder:"Enter your phone number",required:""},null,512),[[x,s.value.phone]])])]),M(H,{modelValue:s.value.addressData,"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.addressData=o)},null,8,["modelValue"]),e("div",ee,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium"},"ফ্লাট নং, বাসা নং, রোড, গ্রাম/মহল্লা",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.value.address=o),class:"input-1",placeholder:"ফ্লাট নং, বাসা নং, রোড, গ্রাম",required:""},null,512),[[x,s.value.address]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium"},"বিকল্প ফোন",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s.value.alt_phone=o),class:"input-1",placeholder:"বিকল্প ফোন"},null,512),[[x,s.value.alt_phone]])])])]),e("div",te,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium"},"Payment Method",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.payment_method=o),class:"input-1"},t[11]||(t[11]=[e("option",{value:"Cash"},"Cash",-1),e("option",{value:"Card"},"Card",-1),e("option",{value:"Mobile Banking"},"Mobile Banking",-1),e("option",{value:"Other"},"Other",-1)]),512),[[k,s.value.payment_method]])])]),e("div",oe,[e("div",se,[t[15]||(t[15]=e("h2",{class:"title-md text-center"},"অর্ডারের বিবরণ",-1)),(p(!0),d(h,null,j(w(a).cartItems,o=>(p(),d("div",{key:o.id,class:"flex justify-between"},[e("span",null,b(o.name)+" (x"+b(o.quantity)+")",1),e("span",null,"৳"+b(o.selling_price*o.quantity),1)]))),128)),t[16]||(t[16]=e("hr",{class:"border border-black"},null,-1)),e("div",ae,[t[13]||(t[13]=e("span",null,"কুরিয়ার চার্জ",-1)),e("span",null,"৳"+b(f.value),1)]),t[17]||(t[17]=e("hr",{class:"border border-black"},null,-1)),e("div",ne,[t[14]||(t[14]=e("span",null,"মোট:",-1)),e("span",null," ৳"+b(w(a).cartItems.reduce((o,n)=>o+n.selling_price*n.quantity,0)+Number(f.value)),1)])]),t[18]||(t[18]=e("div",{class:"flex justify-center"},[e("button",{type:"submit",class:"btn-2"},"Place Order")],-1))])],32)]))}};export{fe as default};
