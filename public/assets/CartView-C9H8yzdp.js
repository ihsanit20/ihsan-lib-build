import{u as $,r as v,o as a,c as n,a as e,t as x,w as M,b as y,v as m,d as h,e as j,f as _,F as w,g as E,h as g,i as B,j as I,_ as N,k as U}from"./index-Bmm_wY_4.js";const A={key:0,class:"modal-bg"},L={class:"modal-card"},R={class:"text-xl font-bold mb-4 text-center"},T={class:"mb-4"},q=["disabled"],D={key:0,class:"mb-4"},F={key:1,class:"mb-4"},P={type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded w-full"},Y={__name:"AuthModal",setup(C){const b=$(),p=v(!0),o=v(""),u=v(""),d=v(""),r=v(1),i=v(!1),t=()=>{p.value=!1},s=async()=>{try{if(!o.value)return;const c=await b.checkPhone(o.value);i.value=c,r.value=2}catch(c){console.error("Error checking phone:",c)}},k=async()=>{try{if(!o.value||!d.value)return;await b.login(o.value,d.value),t()}catch(c){console.error("Error logging in:",c)}},S=async()=>{try{if(!o.value||!d.value||!u.value)return;await b.register(u.value,o.value,d.value),t()}catch(c){console.error("Error registering:",c)}},V=async()=>{r.value===1?await s():i.value?await k():await S()};return(c,l)=>p.value?(a(),n("div",A,[e("div",L,[e("h2",R,x(r.value===1?"ফোন নাম্বার দিন":i.value?"লগইন করুন":"রেজিস্টার করুন"),1),e("form",{onSubmit:M(V,["prevent"])},[e("div",T,[l[3]||(l[3]=e("label",{for:"phone",class:"block mb-1 text-gray-700"},"ফোন নাম্বার",-1)),y(e("input",{id:"phone","onUpdate:modelValue":l[0]||(l[0]=f=>o.value=f),type:"text",placeholder:"আপনার ফোন নাম্বার",class:"w-full border px-3 py-2 rounded",disabled:r.value===2},null,8,q),[[m,o.value]])]),r.value===2&&!i.value?(a(),n("div",D,[l[4]||(l[4]=e("label",{for:"name",class:"block mb-1 text-gray-700"},"নাম",-1)),y(e("input",{id:"name","onUpdate:modelValue":l[1]||(l[1]=f=>u.value=f),type:"text",placeholder:"আপনার নাম",class:"w-full border px-3 py-2 rounded"},null,512),[[m,u.value]])])):h("",!0),r.value===2?(a(),n("div",F,[l[5]||(l[5]=e("label",{for:"password",class:"block mb-1 text-gray-700"},"পাসওয়ার্ড",-1)),y(e("input",{id:"password","onUpdate:modelValue":l[2]||(l[2]=f=>d.value=f),type:"password",placeholder:"আপনার পাসওয়ার্ড",class:"w-full border px-3 py-2 rounded"},null,512),[[m,d.value]])])):h("",!0),e("button",P,x(r.value===1?"জয়েন":i.value?"লগইন":"রেজিস্টার"),1)],32),e("button",{type:"button",onClick:t,class:"absolute top-2 right-2 text-gray-500 hover:text-gray-700"}," × ")])])):h("",!0)}},O={class:"my-container space-y-6 py-6"},Q={key:0,class:"card-bg p-3 md:p-4"},z={class:"space-y-4"},G={class:"w-14 md:w-16"},H=["src","alt"],J={class:"flex-1 flex flex-col justify-between h-full"},K={class:"text-xs md:text-lg font-semibold line-clamp-2"},W={class:"text-xs md:text-sm text-gray-600 mb-1 mt-px"},X={key:0,class:"text-gray-300 text-xs"},Z=["onClick"],ee={class:"font-semibold absolute right-0 bottom-4 md:text-lg text-sky-700"},te={class:"flex justify-end gap-4 items-center md:py-4"},se={class:"text-xl font-semibold"},le={key:1},ae={__name:"CartView",setup(C){const b=U(),p=j(),o=$(),u=v(!1),d=()=>{o.isLoggedIn?b.push({name:"CheckOut"}):u.value=!0},r=()=>p.cartItems.reduce((i,t)=>i+t.selling_price*t.quantity,0);return(i,t)=>(a(),n(w,null,[e("div",O,[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold"},"Your Cart",-1)),_(p).cartItems.length>0?(a(),n("div",Q,[e("div",z,[(a(!0),n(w,null,E(_(p).cartItems,s=>(a(),n("div",{key:s.id,class:"flex gap-x-4 border-b pb-4 relative"},[e("div",G,[e("img",{src:s.photo,alt:s.name,class:"grow-0 shrink-0 w-full aspect-[3/4] object-cover rounded shadow"},null,8,H)]),e("div",J,[e("h2",K,x(s.name),1),e("p",W,[t[1]||(t[1]=g(" মূল্য: ")),s.mrp>s.selling_price?(a(),n("del",X," ৳"+x(s.mrp),1)):h("",!0),g(" ৳"+x(s.selling_price),1)]),I(N,{book:s},null,8,["book"])]),e("i",{onClick:k=>_(p).updateQuantity(s,0),class:"fas fa-trash-alt text-red-400 cursor-pointer"},null,8,Z),e("div",ee," মোট: ৳"+x(s.selling_price*s.quantity),1)]))),128))]),e("div",te,[t[2]||(t[2]=e("h2",{class:"text-xl font-bold"},"মোট মূল্য:",-1)),e("span",se,"৳"+x(r()),1)]),e("div",{class:"flex justify-center gap-4 items-center"},[e("button",{onClick:d,class:"btn-2"},t[3]||(t[3]=[g(" চেকআউট করুন "),e("i",{class:"fas fa-arrow-right"},null,-1)]))])])):(a(),n("div",le,t[4]||(t[4]=[e("p",{class:"text-gray-500 text-center"},"Your cart is empty.",-1)])))]),u.value?(a(),B(Y,{key:0,onClose:t[0]||(t[0]=s=>u.value=!1)})):h("",!0)],64))}};export{ae as default};
