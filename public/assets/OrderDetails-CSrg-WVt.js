import{u as $}from"./order-C49YPC6B.js";import{r as p,e as z,c as a,a as t,g as A,h as G,x as H,t as l,j as r,F as J,s as K,i as Q,k as U,C as W,l as X,o as n}from"./index-DZyHpt5a.js";import{L as Y}from"./LoaderView-Dv0HV4Tk.js";const Z={class:"my-container space-y-4"},tt={class:"flex items-center justify-between gap-2 print:hidden"},st={key:1,class:"text-red-600 text-center print:hidden"},et={key:2},lt={class:"card-bg p-6"},ot={class:"space-y-1"},rt={class:"flex justify-between"},nt={class:"text-sm text-black"},at={class:"text-sm text-black"},dt={class:"text-sm flex justify-between"},ut={class:"grid md:grid-cols-2 gap-1"},it={class:"overflow-x-auto bg-white"},bt={class:"table-auto w-full border-collapse border border-gray-600 text-black"},pt={class:"px-2 py-2 border border-gray-300"},ct={class:"px-2 py-2 border border-gray-300 text-center"},yt={class:"px-2 py-2 border border-gray-300 text-center"},gt={class:"px-2 py-2 border border-gray-300 text-end"},mt={class:"grid md:grid-cols-2 gap-4"},vt={class:"p-4 rounded-lg"},xt={class:"w-full text-right text-sm md:text-base"},ft={class:"py-1"},_t={class:"py-1 font-semibold"},kt={class:"py-1"},Bt={class:"py-1"},Lt={class:"py-1 font-bold"},wt={class:"py-1 font-bold"},Dt={class:"py-1"},Nt={class:"flex justify-center space-x-4"},Vt={__name:"OrderDetails",setup(St){const E=U(),c=$(),y=p(null),e=p(null),g=p(!0),d=p(null);z(async()=>{try{y.value=E.params.id,await c.fetchOrder(y.value),e.value=c.order}catch(u){d.value=u.message}finally{g.value=!1}});const I=async u=>{var s,i;try{await c.cancelOrder(u),e.value.status="Cancelled"}catch(b){d.value=((i=(s=b.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to cancel order"}},M=()=>{W.go(-1)},T=()=>{window.print()};return(u,s)=>{var b,m,v,x,f,_,k,B,L,w,D,N,S,C,j,O,V,h,F,R,q;const i=X("RouterLink");return n(),a("div",Z,[t("div",tt,[t("button",{class:"btn-3",onClick:M},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[3]||(s[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"অর্ডার বিস্তারিত",-1)),A(i,{to:{name:"OrderCreate"},class:"btn-2"},{default:G(()=>s[2]||(s[2]=[t("span",{class:"hidden md:flex"},"নতুন অর্ডার",-1),t("i",{class:"far fa-plus"},null,-1)])),_:1})]),g.value?(n(),H(Y,{key:0})):d.value?(n(),a("div",st,l(d.value),1)):(n(),a("div",et,[t("div",lt,[s[19]||(s[19]=t("div",{class:"flex justify-center"},[t("h1",{class:"text-2xl font-bold"},"ক্যাশ ম্যামো")],-1)),t("div",ot,[t("div",rt,[t("p",nt,[s[4]||(s[4]=t("b",null,"অর্ডার নং :",-1)),r(" "+l(Number((b=e.value)==null?void 0:b.id).toLocaleString("bn-BD")),1)]),t("p",at,[s[5]||(s[5]=t("b",null,"তারিখ: ",-1)),r(" "+l(new Date((m=e.value)==null?void 0:m.created_at).toLocaleDateString("bn-BD")),1)])]),t("div",dt,[t("p",null,[s[6]||(s[6]=t("strong",null,"ধরণ: ",-1)),r(" "+l((v=e.value)==null?void 0:v.type),1)]),t("p",null,[s[7]||(s[7]=t("strong",null,"অবস্থা: ",-1)),t("span",null,l((x=e.value)==null?void 0:x.status),1)])])]),s[20]||(s[20]=t("hr",null,null,-1)),t("div",ut,[t("p",null,[s[8]||(s[8]=t("strong",null,"ক্রেতার নাম:",-1)),r(" "+l((_=(f=e.value)==null?void 0:f.user)==null?void 0:_.name),1)]),t("p",null,[s[9]||(s[9]=t("strong",null,"ফোন:",-1)),r(" "+l((B=(k=e.value)==null?void 0:k.user)==null?void 0:B.phone),1)]),t("p",null,[s[10]||(s[10]=t("strong",null,"ঠিকানা:",-1)),r(" "+l((w=(L=e.value)==null?void 0:L.user)==null?void 0:w.address),1)]),t("p",null,[s[11]||(s[11]=t("strong",null,"আইডি:",-1)),r(" "+l(Number((N=(D=e.value)==null?void 0:D.user)==null?void 0:N.id).toLocaleString("bn-BD")),1)])]),s[21]||(s[21]=t("hr",null,null,-1)),s[22]||(s[22]=t("div",{class:"flex justify-center py-2"},[t("p",{class:"font-medium text-lg border-4 border-double px-4 rounded-full border-gray-400"}," পণ্য বিবরণ ")],-1)),t("div",it,[t("table",bt,[s[12]||(s[12]=t("thead",null,[t("tr",{class:"bg-gray-200 text-left uppercase text-sm tracking-wider"},[t("th",{class:"px-2 py-2 border border-gray-200"},"পণ্যের নাম"),t("th",{class:"px-2 py-2 border border-gray-200 text-center"},"পরিমান"),t("th",{class:"px-2 py-2 border border-gray-200 text-center"},"দর"),t("th",{class:"px-2 py-2 border border-gray-200 text-end"},"দাম")])],-1)),t("tbody",null,[(n(!0),a(J,null,K((S=e.value)==null?void 0:S.order_details,o=>{var P;return n(),a("tr",{key:o.id,class:"hover:bg-gray-50 transition ease-in-out"},[t("td",pt,l((P=o==null?void 0:o.product)==null?void 0:P.name),1),t("td",ct,l(Number(o.quantity).toLocaleString("bn-BD"))+" টি ",1),t("td",yt," ৳ "+l(Number(o.price).toLocaleString("bn-BD")),1),t("td",gt," ৳ "+l(Number(o.quantity*o.price).toLocaleString("bn-BD")),1)])}),128))])])]),t("div",mt,[s[18]||(s[18]=t("div",null,null,-1)),t("div",vt,[t("table",xt,[t("tbody",null,[t("tr",null,[s[13]||(s[13]=t("td",{class:"py-1 font-semibold"},"মোট মূল্য:",-1)),t("td",ft,"৳ "+l(Number((C=e.value)==null?void 0:C.total_price).toLocaleString("bn-BD")),1)]),t("tr",null,[t("td",_t," ডিস্কাউন্ট ("+l(Number((j=e.value)==null?void 0:j.discount_percentage).toLocaleString("bn-BD"))+"%): ",1),t("td",kt," ৳ "+l(Number((O=e.value)==null?void 0:O.discount_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[14]||(s[14]=t("td",{class:"py-1 font-semibold"},"বাট্টা:",-1)),t("td",Bt,"৳ "+l(Number((V=e.value)==null?void 0:V.adjust_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[15]||(s[15]=t("td",{class:"py-1 font-semibold"},"পরিশোধযোগ্য পরিমান:",-1)),t("td",Lt," ৳ "+l(Number((h=e.value)==null?void 0:h.payable_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[16]||(s[16]=t("td",{class:"py-1 font-semibold"},"পরিশোধ:",-1)),t("td",wt," ৳ "+l(Number((F=e.value)==null?void 0:F.paid_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[17]||(s[17]=t("td",{class:"py-1 font-semibold"},"বাকী:",-1)),t("td",Dt,"৳ "+l(Number((R=e.value)==null?void 0:R.due_amount).toLocaleString("bn-BD")),1)])])])])])])])),t("div",Nt,[t("button",{onClick:T,class:"btn-3"},s[23]||(s[23]=[t("i",{class:"fas fa-print pr-1"},null,-1),r(" প্রিন্ট করুন ")])),((q=e.value)==null?void 0:q.status)==="Pending"?(n(),a("button",{key:0,class:"btn-contrast",onClick:s[0]||(s[0]=o=>I(e.value.id))}," ক্যানসেল করুন ")):Q("",!0)])])}}};export{Vt as default};
