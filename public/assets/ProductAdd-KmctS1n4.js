import{r as u,k as se,c as s,b as e,a as w,t as o,l as r,s as V,K as M,F as f,h as x,u as g,J as ae,i as ue,o as a}from"./vue-DFkF7ryY.js";import{u as oe}from"./author-DPqvzfHN.js";import{u as ne}from"./category-BRwXdpyN.js";import{d as de}from"./index-DG3aClSM.js";import{u as ie}from"./publisher-kLS3K_4K.js";import"./vendor-BtuGy7By.js";const re={class:"my-container space-y-4"},ve={class:"flex items-center justify-between gap-2"},me=["disabled"],ce={key:0,class:"text-red-500 text-sm"},pe={class:"space-y-6"},be={key:0,class:"text-red-500 text-sm mt-1"},fe={class:"grid grid-cols-2 gap-4"},xe={key:0,class:"text-red-500 text-sm mt-1"},ge={key:0,class:"text-red-500 text-sm mt-1"},ye={class:"grid md:grid-cols-2 gap-4"},ke=["value"],he={key:0,class:"text-red-500 text-sm mt-1"},_e={class:"p-4 border-2 rounded-md"},Ce={class:"flex flex-wrap gap-2"},we=["onClick"],Se={class:"mt-2 relative"},Pe=["value","disabled"],Ve={class:"p-4 border-2 rounded-md"},Be={class:"flex flex-wrap gap-2"},Ue=["onClick"],Ie={class:"mt-2 relative"},Ne=["value","disabled"],Ae={class:"p-4 border-2 rounded-md"},qe={class:"flex flex-wrap gap-2"},Me=["onClick"],Te={class:"mt-2 relative"},Fe=["value","disabled"],$e={key:0,class:"text-red-500 text-sm"},je={class:"flex justify-center"},De=["disabled"],Le={key:0},Ee={key:1},Qe={__name:"ProductAdd",setup(Je){const O=ue(),Q=de(),F=ie(),T=ne(),S=oe(),B=u(""),U=u(""),I=u(""),N=u(""),A=u(""),q=u(""),v=u([]),y=u(null),m=u([]),k=u(null),c=u([]),h=u(null),P=u(!1),_=u(null),n=u(null);se(async()=>{await T.fetchCategories(),await S.fetchAuthors(),await F.fetchPublishers()});const W=()=>{y.value&&!v.value.includes(y.value)&&v.value.push(y.value),y.value=null},X=d=>{v.value=v.value.filter(t=>t!==d)},Y=()=>{k.value&&!m.value.includes(k.value)&&m.value.push(k.value),k.value=null},Z=d=>{m.value=m.value.filter(t=>t!==d)},ee=()=>{h.value&&!c.value.includes(h.value)&&c.value.push(h.value),h.value=null},te=d=>{c.value=c.value.filter(t=>t!==d)},$=async()=>{var d,t;P.value=!0,_.value=null;try{const i=[...m.value.map(C=>({id:C,role:"author"})),...c.value.map(C=>({id:C,role:"translator"}))];await Q.createProduct({name:B.value,publisher_id:U.value,ISBN:A.value,description:q.value,categories:v.value,authors:i,mrp:I.value,selling_price:N.value}),B.value="",U.value="",A.value="",q.value="",v.value=[],m.value=[],c.value=[],I.value="",N.value="",alert("Product created successfully!")}catch(i){_.value=((t=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:t.message)||"Failed to create product",n.value=i.response.data.errors}finally{P.value=!1}},le=()=>{O.go(-1)};return(d,t)=>{var i,C,j,D,L,E,J,K,R,z,G,H;return a(),s("div",re,[e("div",ve,[e("button",{type:"button",class:"btn-3",onClick:le},t[9]||(t[9]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[11]||(t[11]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Create New Product",-1)),e("button",{type:"button",class:"btn-2",onClick:$,disabled:P.value},t[10]||(t[10]=[e("span",{class:"hidden md:flex"},"নতুন বই",-1),e("i",{class:"far fa-save"},null,-1)]),8,me)]),e("form",{onSubmit:ae($,["prevent"]),class:"card-bg md:p-8 p-4"},[_.value?(a(),s("div",ce,o(_.value),1)):w("",!0),e("div",pe,[e("div",null,[t[12]||(t[12]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"পণ্যের নাম",-1)),r(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>B.value=l),type:"text",class:"input-1",required:""},null,512),[[V,B.value]]),(C=(i=n.value)==null?void 0:i.name)!=null&&C.length?(a(),s("div",be,o((j=n.value)==null?void 0:j.name[0]),1)):w("",!0)]),e("div",fe,[e("div",null,[t[13]||(t[13]=e("label",{for:"mrp",class:"block text-sm font-medium text-gray-700"},"মুদ্রিত মূল্য",-1)),r(e("input",{id:"mrp","onUpdate:modelValue":t[1]||(t[1]=l=>I.value=l),type:"number",class:"input-1",required:""},null,512),[[V,I.value]]),(L=(D=n.value)==null?void 0:D.mrp)!=null&&L.length?(a(),s("div",xe,o((E=n.value)==null?void 0:E.mrp[0]),1)):w("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{for:"sellingPrice",class:"block text-sm font-medium text-gray-700"}," বিক্রয় মূল্য ",-1)),r(e("input",{id:"sellingPrice","onUpdate:modelValue":t[2]||(t[2]=l=>N.value=l),type:"number",class:"input-1",required:""},null,512),[[V,N.value]]),(K=(J=n.value)==null?void 0:J.selling_price)!=null&&K.length?(a(),s("div",ge,o((R=n.value)==null?void 0:R.selling_price[0]),1)):w("",!0)])]),e("div",ye,[e("div",null,[t[15]||(t[15]=e("label",{for:"ISBN",class:"block text-sm font-medium text-gray-700"},"ISBN",-1)),r(e("input",{id:"ISBN","onUpdate:modelValue":t[3]||(t[3]=l=>A.value=l),type:"text",class:"input-1"},null,512),[[V,A.value]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"publisherId",class:"block text-sm font-medium text-gray-700"}," Publisher ",-1)),r(e("select",{id:"publisherId","onUpdate:modelValue":t[4]||(t[4]=l=>U.value=l),class:"input-1",required:""},[t[16]||(t[16]=e("option",{value:"",disabled:""},"-- Select Publisher --",-1)),(a(!0),s(f,null,x(g(F).publishers,l=>(a(),s("option",{key:l.id,value:l.id},o(l.name),9,ke))),128))],512),[[M,U.value]]),(G=(z=n.value)==null?void 0:z.publisher_id)!=null&&G.length?(a(),s("div",he,o((H=n.value)==null?void 0:H.publisher_id[0]),1)):w("",!0)])]),e("div",null,[t[18]||(t[18]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," বিস্তারিত বিবরণ ",-1)),r(e("textarea",{id:"description","onUpdate:modelValue":t[5]||(t[5]=l=>q.value=l),rows:"4",class:"input-1"},null,512),[[V,q.value]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ক্যাটাগরি",-1)),e("div",_e,[e("div",Ce,[(a(!0),s(f,null,x(v.value,l=>{var p;return a(),s("div",{key:l,class:"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full"},[e("span",null,o((p=g(T).categories.find(b=>b.id===l))==null?void 0:p.name),1),e("button",{type:"button",onClick:b=>X(l),class:"ml-2 text-blue-500 hover:text-blue-800"}," × ",8,we)])}),128))]),e("div",Se,[r(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>y.value=l),onChange:W,class:"input-1"},[t[19]||(t[19]=e("option",{value:"",disabled:""},"- সিলেক্ট ক্যাটাগরি -",-1)),(a(!0),s(f,null,x(g(T).categories,l=>(a(),s("option",{key:l.id,value:l.id,disabled:v.value.includes(l.id)},o(l.name),9,Pe))),128))],544),[[M,y.value]])])])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"লেখক",-1)),e("div",Ve,[e("div",Be,[(a(!0),s(f,null,x(m.value,l=>{var p;return a(),s("div",{key:l,class:"flex items-center bg-green-100 text-green-700 px-3 py-1 rounded-full"},[e("span",null,o((p=g(S).authors.find(b=>b.id===l))==null?void 0:p.name),1),e("button",{type:"button",onClick:b=>Z(l),class:"ml-2 text-green-500 hover:text-green-800"}," × ",8,Ue)])}),128))]),e("div",Ie,[r(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>k.value=l),onChange:Y,class:"input-1"},[t[21]||(t[21]=e("option",{value:"",disabled:""},"- সিলেক্ট লেখক -",-1)),(a(!0),s(f,null,x(g(S).authors,l=>(a(),s("option",{key:l.id,value:l.id,disabled:m.value.includes(l.id)},o(l.name),9,Ne))),128))],544),[[M,k.value]])])])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"অনুবাদক",-1)),e("div",Ae,[e("div",qe,[(a(!0),s(f,null,x(c.value,l=>{var p;return a(),s("div",{key:l,class:"flex items-center bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full"},[e("span",null,o((p=g(S).authors.find(b=>b.id===l))==null?void 0:p.name),1),e("button",{type:"button",onClick:b=>te(l),class:"ml-2 text-yellow-500 hover:text-yellow-800"}," × ",8,Me)])}),128))]),e("div",Te,[r(e("select",{"onUpdate:modelValue":t[8]||(t[8]=l=>h.value=l),onChange:ee,class:"input-1"},[t[23]||(t[23]=e("option",{value:"",disabled:""},"- সিলেক্ট অনুবাদক -",-1)),(a(!0),s(f,null,x(g(S).authors,l=>(a(),s("option",{key:l.id,value:l.id,disabled:c.value.includes(l.id)},o(l.name),9,Fe))),128))],544),[[M,h.value]])])])]),_.value?(a(),s("div",$e,o(_.value),1)):w("",!0),e("div",je,[e("button",{type:"submit",disabled:P.value,class:"btn-2"},[P.value?(a(),s("span",Le,"Loading...")):(a(),s("span",Ee,"Create Product"))],8,De)])])],32)])}}};export{Qe as default};
