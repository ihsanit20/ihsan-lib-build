import{u as w}from"./category-BnuEHs_K.js";import{E as $,J as h,o as l,c as d,a as e,w as S,j as g,v,h as b,l as D,B as M,f as N,F as C,r as V,t as f,e as _,z as k}from"./index-B9QrrNei.js";import{_ as O}from"./HeaderWithButtons-DrLMGU3z.js";const j={class:"modal-bg"},A={class:"modal-card"},B={class:"flex justify-end space-x-4"},E={__name:"EditCategory",props:{category:Object},emits:["close","updated"],setup(x,{emit:u}){const o=u,r=x,a=$({name:"",description:""}),c=w();h(()=>r.category,s=>{a.name=s.name||"",a.description=s.description||""},{immediate:!0});const y=async()=>{await c.updateCategory(r.category.id,a),o("updated"),o("close")};return(s,t)=>(l(),d("div",j,[e("div",A,[t[6]||(t[6]=e("h2",{class:"text-xl font-bold text-center"},"Edit Category",-1)),e("form",{onSubmit:S(y,["prevent"]),class:"space-y-4"},[e("div",null,[t[3]||(t[3]=e("label",null,"Name",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>a.name=i),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[v,a.name]])]),e("div",null,[t[4]||(t[4]=e("label",null,"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=i=>a.description=i),class:"w-full p-2 border rounded"},null,512),[[v,a.description]])]),e("div",B,[t[5]||(t[5]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"},"Save",-1)),e("button",{type:"button",onClick:t[2]||(t[2]=i=>o("close")),class:"bg-gray-500 text-white px-4 py-2 rounded"}," Cancel ")])],32)])]))}},L={class:"modal-bg"},U={class:"modal-card"},z={class:"flex justify-end space-x-4"},q={__name:"AddCategory",emits:["close","saved"],setup(x,{emit:u}){const o=u,r=$({name:"",description:""}),a=w(),c=async()=>{await a.createCategory(r),o("saved"),o("close")};return(y,s)=>(l(),d("div",L,[e("div",U,[s[6]||(s[6]=e("h2",{class:"text-xl font-bold text-center"},"Add Category",-1)),e("form",{onSubmit:S(c,["prevent"]),class:"space-y-4"},[e("div",null,[s[3]||(s[3]=e("label",null,"Name",-1)),g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.name=t),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[v,r.name]])]),e("div",null,[s[4]||(s[4]=e("label",null,"Description",-1)),g(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.description=t),class:"w-full p-2 border rounded"},null,512),[[v,r.description]])]),e("div",z,[s[5]||(s[5]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"},"Save",-1)),e("button",{type:"button",onClick:s[2]||(s[2]=t=>o("close")),class:"bg-gray-500 text-white px-4 py-2 rounded"}," Cancel ")])],32)])]))}},F={class:"my-container space-y-4"},I={class:"overflow-x-auto bg-white shadow rounded-lg"},J={class:"table-auto w-full border-collapse border border-gray-200"},T={key:0},G={key:1},H={class:"px-4 py-3 border border-gray-200"},K={class:"px-4 py-3 border border-gray-200"},P={class:"px-4 py-3 border border-gray-200 text-center"},Q=["onClick"],R={key:0,class:"mt-4 text-red-600 text-sm text-center"},ee={__name:"CategoryList",setup(x){const u=w(),o=b(!1),r=b(null),a=b(null),c=b(!0);D(async()=>{try{await u.fetchCategories()}catch(p){a.value=p.message}finally{c.value=!1}});const y=M(()=>[...u.categories].sort((p,n)=>new Date(n.created_at)-new Date(p.created_at))),s=p=>{r.value=p,o.value=!0},t=()=>{r.value=null,o.value=!0},i=()=>{o.value=!1,r.value=null};return(p,n)=>(l(),d(C,null,[e("div",F,[N(O,{title:"Category List",onAdd:t}),e("div",I,[e("table",J,[n[2]||(n[2]=e("thead",null,[e("tr",{class:"bg-gray-200 text-left text-gray-700 uppercase text-sm tracking-wider"},[e("th",{class:"px-4 py-3 border border-gray-200"},"ID"),e("th",{class:"px-4 py-3 border border-gray-200"},"Name"),e("th",{class:"px-4 py-3 border border-gray-200 text-center"},"Actions")])],-1)),e("tbody",null,[c.value?(l(),d("tr",T,n[0]||(n[0]=[e("td",{colspan:"3",class:"text-center py-6"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("div",{class:"w-6 h-6 border-4 border-t-4 border-gray-300 rounded-full animate-spin"}),e("span",null,"Loading...")])],-1)]))):y.value.length===0?(l(),d("tr",G,n[1]||(n[1]=[e("td",{colspan:"3",class:"text-center py-6 text-gray-500"},"No categories found",-1)]))):(l(!0),d(C,{key:2},V(y.value,m=>(l(),d("tr",{key:m.id,class:"hover:bg-gray-50 transition ease-in-out"},[e("td",H,f(m.id),1),e("td",K,f(m.name),1),e("td",P,[e("button",{class:"btn-primary py-1 px-3 rounded-md text-white bg-blue-500 hover:bg-blue-600 transition",onClick:W=>s(m)}," Edit ",8,Q)])]))),128))])])]),a.value?(l(),d("div",R,f(a.value),1)):_("",!0)]),o.value&&r.value?(l(),k(E,{key:0,category:r.value,isOpen:o.value,onClose:i,class:"z-50"},null,8,["category","isOpen"])):_("",!0),o.value&&!r.value?(l(),k(q,{key:1,isOpen:o.value,onClose:i,class:"z-50"},null,8,["isOpen"])):_("",!0)],64))}};export{ee as default};
