import{r as u,e as E,c as s,a as e,w as R,b as m,v as w,F as x,q as g,x as U,m as y,t as c,i as z,o as a,d as G}from"./index-DnFlqQxg.js";import{u as H}from"./product-ysosN2UT.js";import{u as J}from"./category-DyLxZw5J.js";import{u as K}from"./author-C-CAPrmu.js";const O={class:"my-container space-y-4"},Q={class:"flex items-center justify-between gap-2"},W=["disabled"],X={class:"card-bg md:p-8 p-4"},Y={class:"grid grid-cols-2 gap-4"},Z={class:"p-4 border-2 rounded-md"},ee={class:"flex flex-wrap gap-2"},le=["onClick"],te={class:"mt-2 relative"},se=["value","disabled"],ae={class:"p-4 border-2 rounded-md"},ue={class:"flex flex-wrap gap-2"},oe=["onClick"],ne={class:"mt-2 relative"},de=["value","disabled"],ie={class:"p-4 border-2 rounded-md"},re={class:"flex flex-wrap gap-2"},ve=["onClick"],me={class:"mt-2 relative"},ce=["value","disabled"],pe={key:0,class:"text-red-500 text-sm"},be={class:"flex justify-center"},fe=["disabled"],xe={key:0},ge={key:1},Se={__name:"ProductAdd",setup(ye){const I=G(),q=H(),N=J(),k=K(),_=u(""),S=u(""),h=u(""),B=u(""),P=u(""),n=u([]),p=u(null),d=u([]),b=u(null),i=u([]),f=u(null),C=u(!1),V=u(null);E(async()=>{await N.fetchCategories(),await k.fetchAuthors()});const M=()=>{p.value&&!n.value.includes(p.value)&&n.value.push(p.value),p.value=null},T=o=>{n.value=n.value.filter(l=>l!==o)},F=()=>{b.value&&!d.value.includes(b.value)&&d.value.push(b.value),b.value=null},$=o=>{d.value=d.value.filter(l=>l!==o)},j=()=>{f.value&&!i.value.includes(f.value)&&i.value.push(f.value),f.value=null},D=o=>{i.value=i.value.filter(l=>l!==o)},A=async()=>{C.value=!0,V.value=null;try{const o=[...d.value.map(l=>({id:l,role:"author"})),...i.value.map(l=>({id:l,role:"translator"}))];await q.createProduct({name:_.value,ISBN:B.value,description:P.value,categories:n.value,authors:o,mrp:S.value,selling_price:h.value}),_.value="",B.value="",P.value="",n.value=[],d.value=[],i.value=[],S.value="",h.value="",alert("Product created successfully!")}catch(o){V.value=o.message||"Failed to create product"}finally{C.value=!1}},L=()=>{I.go(-1)};return(o,l)=>(a(),s("div",O,[e("div",Q,[e("button",{class:"btn-3",onClick:L},l[8]||(l[8]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),l[10]||(l[10]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Create New Product",-1)),e("button",{class:"btn-2",onClick:A,disabled:C.value},l[9]||(l[9]=[e("span",{class:"hidden md:flex"},"নতুন বই",-1),e("i",{class:"far fa-save"},null,-1)]),8,W)]),e("div",X,[e("form",{onSubmit:R(A,["prevent"]),class:"space-y-6"},[e("div",null,[l[11]||(l[11]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"পণ্যের নাম",-1)),m(e("input",{id:"name","onUpdate:modelValue":l[0]||(l[0]=t=>_.value=t),type:"text",class:"input-1",required:""},null,512),[[w,_.value]])]),e("div",Y,[e("div",null,[l[12]||(l[12]=e("label",{for:"mrp",class:"block text-sm font-medium text-gray-700"},"মুদ্রিত মূল্য",-1)),m(e("input",{id:"mrp","onUpdate:modelValue":l[1]||(l[1]=t=>S.value=t),type:"number",class:"input-1",required:""},null,512),[[w,S.value]])]),e("div",null,[l[13]||(l[13]=e("label",{for:"sellingPrice",class:"block text-sm font-medium text-gray-700"}," বিক্রয় মূল্য ",-1)),m(e("input",{id:"sellingPrice","onUpdate:modelValue":l[2]||(l[2]=t=>h.value=t),type:"number",class:"input-1",required:""},null,512),[[w,h.value]])])]),e("div",null,[l[14]||(l[14]=e("label",{for:"ISBN",class:"block text-sm font-medium text-gray-700"},"ISBN",-1)),m(e("input",{id:"ISBN","onUpdate:modelValue":l[3]||(l[3]=t=>B.value=t),type:"text",class:"input-1"},null,512),[[w,B.value]])]),e("div",null,[l[15]||(l[15]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," বিস্তারিত বিবরণ ",-1)),m(e("textarea",{id:"description","onUpdate:modelValue":l[4]||(l[4]=t=>P.value=t),rows:"4",class:"input-1"},null,512),[[w,P.value]])]),e("div",null,[l[17]||(l[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ক্যাটাগরি",-1)),e("div",Z,[e("div",ee,[(a(!0),s(x,null,g(n.value,t=>{var r;return a(),s("div",{key:t,class:"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full"},[e("span",null,c((r=y(N).categories.find(v=>v.id===t))==null?void 0:r.name),1),e("button",{type:"button",onClick:v=>T(t),class:"ml-2 text-blue-500 hover:text-blue-800"}," × ",8,le)])}),128))]),e("div",te,[m(e("select",{"onUpdate:modelValue":l[5]||(l[5]=t=>p.value=t),onChange:M,class:"input-1"},[l[16]||(l[16]=e("option",{value:"",disabled:""},"- সিলেক্ট ক্যাটাগরি -",-1)),(a(!0),s(x,null,g(y(N).categories,t=>(a(),s("option",{key:t.id,value:t.id,disabled:n.value.includes(t.id)},c(t.name),9,se))),128))],544),[[U,p.value]])])])]),e("div",null,[l[19]||(l[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"লেখক",-1)),e("div",ae,[e("div",ue,[(a(!0),s(x,null,g(d.value,t=>{var r;return a(),s("div",{key:t,class:"flex items-center bg-green-100 text-green-700 px-3 py-1 rounded-full"},[e("span",null,c((r=y(k).authors.find(v=>v.id===t))==null?void 0:r.name),1),e("button",{type:"button",onClick:v=>$(t),class:"ml-2 text-green-500 hover:text-green-800"}," × ",8,oe)])}),128))]),e("div",ne,[m(e("select",{"onUpdate:modelValue":l[6]||(l[6]=t=>b.value=t),onChange:F,class:"input-1"},[l[18]||(l[18]=e("option",{value:"",disabled:""},"- সিলেক্ট লেখক -",-1)),(a(!0),s(x,null,g(y(k).authors,t=>(a(),s("option",{key:t.id,value:t.id,disabled:d.value.includes(t.id)},c(t.name),9,de))),128))],544),[[U,b.value]])])])]),e("div",null,[l[21]||(l[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"অনুবাদক",-1)),e("div",ie,[e("div",re,[(a(!0),s(x,null,g(i.value,t=>{var r;return a(),s("div",{key:t,class:"flex items-center bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full"},[e("span",null,c((r=y(k).authors.find(v=>v.id===t))==null?void 0:r.name),1),e("button",{type:"button",onClick:v=>D(t),class:"ml-2 text-yellow-500 hover:text-yellow-800"}," × ",8,ve)])}),128))]),e("div",me,[m(e("select",{"onUpdate:modelValue":l[7]||(l[7]=t=>f.value=t),onChange:j,class:"input-1"},[l[20]||(l[20]=e("option",{value:"",disabled:""},"- সিলেক্ট অনুবাদক -",-1)),(a(!0),s(x,null,g(y(k).authors,t=>(a(),s("option",{key:t.id,value:t.id,disabled:i.value.includes(t.id)},c(t.name),9,ce))),128))],544),[[U,f.value]])])])]),V.value?(a(),s("div",pe,c(V.value),1)):z("",!0),e("div",be,[e("button",{type:"submit",disabled:C.value,class:"btn-2"},[C.value?(a(),s("span",xe,"Loading...")):(a(),s("span",ge,"Create Product"))],8,fe)])],32)])]))}};export{Se as default};
