import{u as $}from"./user-CYjOmkVr.js";import{E as V,i as C,B as U,J as h,o as a,c as i,a as e,w as D,j as n,v as p,y as w,e as g,h as x,l as q,f as A,F as k,r as M,t as f,z as S}from"./index-BCex656m.js";import{_ as R}from"./HeaderWithButtons-DpJRudBJ.js";const N={class:"modal-bg"},O={class:"modal-card"},j={class:"grid gap-2"},B={class:""},L={class:""},T={class:"grid grid-cols-2 gap-4"},E={class:""},z={key:0,value:"developer"},F={class:""},P={class:""},W={class:"flex justify-center gap-4"},I={__name:"EditUser",props:{user:Object},emits:["close","updated"],setup(_,{emit:v}){const u=v,d=_,o=V({name:"",phone:"",role:"",customer_type:"",address:""}),m=C(),r=U(()=>m.user&&m.user.role==="developer");h(()=>d.user,t=>{o.name=t.name||"",o.phone=t.phone||"",o.role=t.role||"customer",o.customer_type=t.customer_type||"regular",o.address=t.address||""},{immediate:!0});const b=$(),y=async()=>{const t={name:o.name,phone:o.phone,role:o.role,customer_type:o.customer_type,address:o.address};await b.updateUser(d.user.id,t),await b.fetchUsers(),u("updated"),u("close")};return(t,s)=>(a(),i("div",N,[e("div",O,[s[16]||(s[16]=e("h2",{class:"text-xl font-bold text-center"},"ইউজার সম্পাদনা",-1)),e("form",{onSubmit:D(y,["prevent"]),class:"space-y-4"},[e("div",j,[e("div",B,[s[6]||(s[6]=e("label",{class:""},"নাম",-1)),n(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>o.name=l),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[p,o.name]])]),e("div",L,[s[7]||(s[7]=e("label",{class:""},"ফোন",-1)),n(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>o.phone=l),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[p,o.phone]])]),e("div",T,[e("div",E,[s[11]||(s[11]=e("label",{class:""},"ভূমিকা (Role)",-1)),n(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>o.role=l),class:"w-full p-2 border rounded",required:""},[s[8]||(s[8]=e("option",{value:"customer"},"Customer",-1)),s[9]||(s[9]=e("option",{value:"staff"},"Staff",-1)),s[10]||(s[10]=e("option",{value:"admin"},"Admin",-1)),r.value?(a(),i("option",z,"Developer")):g("",!0)],512),[[w,o.role]])]),e("div",F,[s[13]||(s[13]=e("label",{class:""},"গ্রাহক ধরণ (Customer Type)",-1)),n(e("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>o.customer_type=l),class:"w-full p-2 border rounded",required:""},s[12]||(s[12]=[e("option",{value:"regular"},"Regular",-1),e("option",{value:"retailer"},"Retailer",-1),e("option",{value:"wholesale"},"Wholesale",-1),e("option",{value:"distributor"},"Distributor",-1)]),512),[[w,o.customer_type]])])]),e("div",P,[s[14]||(s[14]=e("label",{class:""},"ঠিকানা",-1)),n(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>o.address=l),type:"text",class:"w-full p-2 border rounded"},null,512),[[p,o.address]])])]),e("div",W,[s[15]||(s[15]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:s[5]||(s[5]=l=>u("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},J={class:"modal-bg"},G={class:"modal-card"},H={class:"grid gap-2"},K={class:""},Q={class:""},X={class:""},Y={class:""},Z={class:"grid grid-cols-2 gap-4"},ee={class:""},se={key:0,value:"developer"},te={class:""},oe={class:""},re={class:"flex justify-center gap-4"},le={__name:"AddUser",emits:["close","saved"],setup(_,{emit:v}){const u=v,d=C(),o=$(),m=U(()=>d.user&&d.user.role==="developer"),r=V({name:"",phone:"",password:"",password_confirmation:"",role:"customer",customer_type:"regular",address:""}),b=async()=>{const y={name:r.name,phone:r.phone,password:r.password,password_confirmation:r.password_confirmation,role:r.role,customer_type:r.customer_type,address:r.address};await o.addUser(y),await o.fetchUsers(),u("saved"),u("close")};return(y,t)=>(a(),i("div",J,[e("div",G,[t[20]||(t[20]=e("h2",{class:"text-xl font-bold text-center"},"ইউজার যুক্ত করুন",-1)),e("form",{onSubmit:D(b,["prevent"]),class:"space-y-4"},[e("div",H,[e("div",K,[t[8]||(t[8]=e("label",{class:""},"নাম",-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.name=s),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[p,r.name]])]),e("div",Q,[t[9]||(t[9]=e("label",{class:""},"ফোন",-1)),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.phone=s),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[p,r.phone]])]),e("div",X,[t[10]||(t[10]=e("label",{class:""},"পাসওয়ার্ড",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.password=s),type:"password",class:"w-full p-2 border rounded"},null,512),[[p,r.password]])]),e("div",Y,[t[11]||(t[11]=e("label",{class:""},"পাসওয়ার্ড নিশ্চিত করুন",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.password_confirmation=s),type:"password",class:"w-full p-2 border rounded",placeholder:"Confirm Password"},null,512),[[p,r.password_confirmation]])]),e("div",Z,[e("div",ee,[t[15]||(t[15]=e("label",{class:""},"ভূমিকা (Role)",-1)),n(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.role=s),class:"w-full p-2 border rounded",required:""},[t[12]||(t[12]=e("option",{value:"customer"},"Customer",-1)),t[13]||(t[13]=e("option",{value:"staff"},"Staff",-1)),t[14]||(t[14]=e("option",{value:"admin"},"Admin",-1)),m.value?(a(),i("option",se,"Developer")):g("",!0)],512),[[w,r.role]])]),e("div",te,[t[17]||(t[17]=e("label",{class:""},"গ্রাহক ধরণ (Customer Type)",-1)),n(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.customer_type=s),class:"w-full p-2 border rounded",required:""},t[16]||(t[16]=[e("option",{value:"regular"},"Regular",-1),e("option",{value:"retailer"},"Retailer",-1),e("option",{value:"wholesale"},"Wholesale",-1),e("option",{value:"distributor"},"Distributor",-1)]),512),[[w,r.customer_type]])])]),e("div",oe,[t[18]||(t[18]=e("label",{class:""},"ঠিকানা",-1)),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.address=s),type:"text",class:"w-full p-2 border rounded"},null,512),[[p,r.address]])])]),e("div",re,[t[19]||(t[19]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:t[7]||(t[7]=s=>u("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},de={class:"my-container space-y-4"},ae={class:"overflow-x-auto bg-white shadow rounded-lg"},ne={class:"table-auto w-full border-collapse border border-gray-200"},ue={key:0},ie={key:1},pe={class:"px-4 py-3 border border-gray-200"},me={class:"px-4 py-3 border border-gray-200"},ve={class:"px-4 py-3 border border-gray-200"},be={class:"px-4 py-3 border border-gray-200"},ye={class:"px-4 py-3 border border-gray-200 text-center"},ce=["onClick"],fe={key:0,class:"mt-4 text-red-600 text-sm text-center"},$e={__name:"UserList",setup(_){const v=$(),u=x(null),d=x(!1),o=x(null),m=x(!0);q(async()=>{try{await v.fetchUsers()}catch(s){u.value=s.message}finally{m.value=!1}});const r=U(()=>[...v.users].sort((s,l)=>new Date(l.created_at)-new Date(s.created_at))),b=s=>{o.value=s,d.value=!0},y=()=>{d.value=!0},t=()=>{d.value=!1,o.value=null};return(s,l)=>(a(),i(k,null,[e("div",de,[A(R,{title:"User List",onAdd:y}),e("div",ae,[e("table",ne,[l[2]||(l[2]=e("thead",null,[e("tr",{class:"bg-gray-100 text-left text-gray-700 uppercase text-sm tracking-wider"},[e("th",{class:"px-4 py-3 border border-gray-200"},"ID"),e("th",{class:"px-4 py-3 border border-gray-200"},"Name"),e("th",{class:"px-4 py-3 border border-gray-200"},"Phone"),e("th",{class:"px-4 py-3 border border-gray-200"},"Role"),e("th",{class:"px-4 py-3 border border-gray-200 text-center"},"Actions")])],-1)),e("tbody",null,[m.value?(a(),i("tr",ue,l[0]||(l[0]=[e("td",{colspan:"5",class:"text-center py-6"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("div",{class:"w-6 h-6 border-4 border-t-4 border-gray-300 rounded-full animate-spin"}),e("span",null,"Loading...")])],-1)]))):r.value.length===0?(a(),i("tr",ie,l[1]||(l[1]=[e("td",{colspan:"5",class:"text-center py-6 text-gray-500"},"No users found",-1)]))):(a(!0),i(k,{key:2},M(r.value,c=>(a(),i("tr",{key:c.id,class:"hover:bg-gray-50 transition ease-in-out"},[e("td",pe,f(c.id),1),e("td",me,f(c.name),1),e("td",ve,f(c.phone),1),e("td",be,f(c.role||"N/A"),1),e("td",ye,[e("button",{class:"btn-primary py-1 px-3 rounded-md text-white bg-blue-500 hover:bg-blue-600 transition",onClick:ge=>b(c)}," Edit ",8,ce)])]))),128))])])]),u.value?(a(),i("div",fe,f(u.value),1)):g("",!0)]),d.value&&o.value?(a(),S(I,{key:0,user:o.value,isOpen:d.value,onClose:t,class:"z-50"},null,8,["user","isOpen"])):g("",!0),d.value&&!o.value?(a(),S(le,{key:1,isOpen:d.value,onClose:t,class:"z-50"},null,8,["isOpen"])):g("",!0)],64))}};export{$e as default};
