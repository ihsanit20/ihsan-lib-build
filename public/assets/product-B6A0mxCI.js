import{y as h,r as d,p as y,z as n}from"./index-BAp8XM6X.js";const C=h("product",()=>{const l=d([]),p=d(null),r=d(!1),u=d(null),v=d(null),i=y(()=>l.value.length);return{products:l,product:p,barcodeImage:v,loading:r,error:u,productCount:i,fetchProducts:async()=>{var o,a;r.value=!0,u.value=null;try{const t=await n.get("/products");l.value=t.data.data}catch(t){u.value=((a=(o=t.response)==null?void 0:o.data)==null?void 0:a.message)||"Failed to fetch products"}finally{r.value=!1}},fetchProduct:async o=>{var a,t;r.value=!0,u.value=null;try{const e=await n.get(`/products/${o}`);p.value=e.data.data}catch(e){u.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to fetch product",p.value=null}finally{r.value=!1}},createProduct:async o=>{var a,t;r.value=!0,u.value=null;try{const e=await n.post("/products",o);return l.value.push(e.data),e.data}catch(e){throw u.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to create product",e}finally{r.value=!1}},updateProduct:async(o,a)=>{var t,e;r.value=!0,u.value=null;try{const s=await n.put(`/products/${o}`,a),c=l.value.findIndex(f=>f.id===o);return c!==-1&&(l.value[c]=s.data),s.data}catch(s){throw u.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to update product",s}finally{r.value=!1}},deleteProduct:async o=>{var a,t;r.value=!0,u.value=null;try{await n.delete(`/products/${o}`),l.value=l.value.filter(e=>e.id!==o)}catch(e){throw u.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to delete product",e}finally{r.value=!1}},uploadPhoto:async(o,a)=>{var e,s;r.value=!0,u.value=null;const t=new FormData;t.append("photo",a);try{return(await n.post(`/products/${o}/photo`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(c){throw u.value=((s=(e=c.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to upload photo",c}finally{r.value=!1}}}});export{C as u};
