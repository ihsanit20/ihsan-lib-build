import{g as G,r as H,L as J}from"./index-O5G5k-zH.js";import{u as K}from"./order-D35vRK0e.js";import{r as c,k as Q,j as U,c as a,b as t,x as W,e as X,w as Y,m as Z,t as l,u as tt,p as r,F as st,h as et,a as lt,o as n}from"./vue-DFkF7ryY.js";import"./vendor-BtuGy7By.js";const ot={class:"my-container space-y-4"},rt={class:"flex items-center justify-between gap-2 print:hidden"},nt={key:1,class:"text-red-600 text-center print:hidden"},at={key:2},dt={class:"card-bg p-6"},ut={class:"flex justify-center items-center"},it=["src"],pt={class:"space-y-1"},ct={class:"flex justify-between"},bt={class:"text-sm text-black"},yt={class:"text-sm text-black"},gt={class:"text-sm flex justify-between"},mt={class:"grid md:grid-cols-2 gap-1"},ft={class:"overflow-x-auto bg-white"},xt={class:"table-auto w-full border-collapse border border-gray-600 text-black"},vt={class:"px-2 py-2 border border-gray-300"},_t={class:"px-2 py-2 border border-gray-300 text-center"},kt={class:"px-2 py-2 border border-gray-300 text-center"},wt={class:"px-2 py-2 border border-gray-300 text-end"},Lt={class:"grid md:grid-cols-2 gap-4"},Bt={class:"p-4 rounded-lg"},St={class:"w-full text-right text-sm md:text-base"},Dt={class:"py-1"},Nt={class:"py-1 font-semibold"},ht={class:"py-1"},Ct={class:"py-1"},jt={class:"py-1 font-bold"},It={class:"py-1 font-bold"},Ot={class:"py-1"},Vt={class:"flex justify-center space-x-4"},Et={__name:"OrderDetails",setup(Ft){const M=U(),b=K(),y=G(),g=c(null),e=c(null),m=c(!0),d=c(null);Q(async()=>{try{g.value=M.params.id,await b.fetchOrder(g.value),e.value=b.order,await y.fetchCompanyInfo()}catch(u){d.value=u.message}finally{m.value=!1}});const $=async u=>{var s,i;try{await b.cancelOrder(u),e.value.status="Cancelled"}catch(p){d.value=((i=(s=p.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to cancel order"}},z=()=>{H.go(-1)},A=()=>{window.print()};return(u,s)=>{var p,f,x,v,_,k,w,L,B,S,D,N,h,C,j,I,O,V,F,R,q,P,T;const i=Z("RouterLink");return n(),a("div",ot,[t("div",rt,[t("button",{class:"btn-3",onClick:z},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[3]||(s[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"অর্ডার বিস্তারিত",-1)),X(i,{to:{name:"OrderCreate"},class:"btn-2"},{default:Y(()=>s[2]||(s[2]=[t("span",{class:"hidden md:flex"},"নতুন অর্ডার",-1),t("i",{class:"far fa-plus"},null,-1)])),_:1})]),m.value?(n(),W(J,{key:0})):d.value?(n(),a("div",nt,l(d.value),1)):(n(),a("div",at,[t("div",dt,[t("div",ut,[t("img",{src:((f=(p=tt(y))==null?void 0:p.companyInfo)==null?void 0:f.logo)||"https://placehold.co/200x100/0284c7/white?text=IhsanIT",alt:"Company Logo",class:"h-20"},null,8,it)]),s[19]||(s[19]=t("div",{class:"flex justify-center"},[t("h1",{class:"text-2xl font-bold"},"ক্যাশ ম্যামো")],-1)),t("div",pt,[t("div",ct,[t("p",bt,[s[4]||(s[4]=t("b",null,"অর্ডার নং :",-1)),r(" "+l(Number((x=e.value)==null?void 0:x.id).toLocaleString("bn-BD")),1)]),t("p",yt,[s[5]||(s[5]=t("b",null,"তারিখ: ",-1)),r(" "+l(new Date((v=e.value)==null?void 0:v.created_at).toLocaleDateString("bn-BD")),1)])]),t("div",gt,[t("p",null,[s[6]||(s[6]=t("strong",null,"ধরণ: ",-1)),r(" "+l((_=e.value)==null?void 0:_.type),1)]),t("p",null,[s[7]||(s[7]=t("strong",null,"অবস্থা: ",-1)),t("span",null,l((k=e.value)==null?void 0:k.status),1)])])]),s[20]||(s[20]=t("hr",null,null,-1)),t("div",mt,[t("p",null,[s[8]||(s[8]=t("strong",null,"ক্রেতার নাম:",-1)),r(" "+l((L=(w=e.value)==null?void 0:w.user)==null?void 0:L.name),1)]),t("p",null,[s[9]||(s[9]=t("strong",null,"ফোন:",-1)),r(" "+l((S=(B=e.value)==null?void 0:B.user)==null?void 0:S.phone),1)]),t("p",null,[s[10]||(s[10]=t("strong",null,"ঠিকানা:",-1)),r(" "+l((N=(D=e.value)==null?void 0:D.user)==null?void 0:N.address),1)]),t("p",null,[s[11]||(s[11]=t("strong",null,"আইডি:",-1)),r(" "+l(Number((C=(h=e.value)==null?void 0:h.user)==null?void 0:C.id).toLocaleString("bn-BD")),1)])]),s[21]||(s[21]=t("hr",null,null,-1)),s[22]||(s[22]=t("div",{class:"flex justify-center py-2"},[t("p",{class:"font-medium text-lg border-4 border-double px-4 rounded-full border-gray-400"}," পণ্য বিবরণ ")],-1)),t("div",ft,[t("table",xt,[s[12]||(s[12]=t("thead",null,[t("tr",{class:"bg-gray-200 text-left uppercase text-sm tracking-wider"},[t("th",{class:"px-2 py-2 border border-gray-200"},"পণ্যের নাম"),t("th",{class:"px-2 py-2 border border-gray-200 text-center"},"পরিমান"),t("th",{class:"px-2 py-2 border border-gray-200 text-center"},"দর"),t("th",{class:"px-2 py-2 border border-gray-200 text-end"},"দাম")])],-1)),t("tbody",null,[(n(!0),a(st,null,et((j=e.value)==null?void 0:j.order_details,o=>{var E;return n(),a("tr",{key:o.id,class:"hover:bg-gray-50 transition ease-in-out"},[t("td",vt,l((E=o==null?void 0:o.product)==null?void 0:E.name),1),t("td",_t,l(Number(o.quantity).toLocaleString("bn-BD"))+" টি ",1),t("td",kt," ৳ "+l(Number(o.price).toLocaleString("bn-BD")),1),t("td",wt," ৳ "+l(Number(o.quantity*o.price).toLocaleString("bn-BD")),1)])}),128))])])]),t("div",Lt,[s[18]||(s[18]=t("div",null,null,-1)),t("div",Bt,[t("table",St,[t("tbody",null,[t("tr",null,[s[13]||(s[13]=t("td",{class:"py-1 font-semibold"},"মোট মূল্য:",-1)),t("td",Dt,"৳ "+l(Number((I=e.value)==null?void 0:I.total_price).toLocaleString("bn-BD")),1)]),t("tr",null,[t("td",Nt," ডিস্কাউন্ট ("+l(Number((O=e.value)==null?void 0:O.discount_percentage).toLocaleString("bn-BD"))+"%): ",1),t("td",ht," ৳ "+l(Number((V=e.value)==null?void 0:V.discount_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[14]||(s[14]=t("td",{class:"py-1 font-semibold"},"বাট্টা:",-1)),t("td",Ct,"৳ "+l(Number((F=e.value)==null?void 0:F.adjust_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[15]||(s[15]=t("td",{class:"py-1 font-semibold"},"পরিশোধযোগ্য পরিমান:",-1)),t("td",jt," ৳ "+l(Number((R=e.value)==null?void 0:R.payable_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[16]||(s[16]=t("td",{class:"py-1 font-semibold"},"পরিশোধ:",-1)),t("td",It," ৳ "+l(Number((q=e.value)==null?void 0:q.paid_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[17]||(s[17]=t("td",{class:"py-1 font-semibold"},"বাকী:",-1)),t("td",Ot,"৳ "+l(Number((P=e.value)==null?void 0:P.due_amount).toLocaleString("bn-BD")),1)])])])])])])])),t("div",Vt,[t("button",{onClick:A,class:"btn-3"},s[23]||(s[23]=[t("i",{class:"fas fa-print pr-1"},null,-1),r(" প্রিন্ট করুন ")])),((T=e.value)==null?void 0:T.status)==="Pending"?(n(),a("button",{key:0,class:"btn-contrast",onClick:s[0]||(s[0]=o=>$(e.value.id))}," ক্যানসেল করুন ")):lt("",!0)])])}}};export{Et as default};
