import{r,e as N,c as n,a as e,g as w,t as l,j as u,F as _,x as g,i as y,y as k,o as s,k as L,L as I}from"./index-DLpTp-Ox.js";import{u as P,_ as V}from"./AddStock-jkHfmmnX.js";import{_ as M}from"./HeaderWithButtons-MWBiI_Su.js";const A={class:"my-container space-y-4"},F={key:0,class:"card-bg p-4"},O={class:"flex md:flex-row flex-col items-center gap-4"},j=["src"],C={class:"title-md"},E={class:"flex gap-2 text-sm"},$={class:""},q={class:""},R={class:"list-disc list-inside mt-2"},T={class:"flex md:flex-row flex-col gap-2 md:gap-4"},z={class:"text-lg font-medium text-sky-600"},G={class:""},H={class:"text-lg font-medium text-red-700"},J={class:"text-lg font-medium text-green-600"},K={class:""},Q={key:2,class:"text-red-600"},U={key:3,class:"overflow-x-auto bg-white shadow rounded-lg"},W={class:"table-auto w-full border-collapse border border-gray-200"},X={class:"px-4 py-2 border text-center"},Y={class:"px-4 py-2 border text-center"},Z={class:"px-4 py-2 border text-center"},oe={__name:"StockDetails",setup(ee){const h=L(),c=P(),d=r(null),b=r(null),i=r([]),o=r(null),p=r(null),x=r(!1),v=r(null),m=r(!1),S=async()=>{try{if(x.value=!0,v.value=null,d.value=h.params.id,d.value)await Promise.all([c.fetchStocksByProductId(d.value),c.fetchAvailableStockByProductId(d.value)]),i.value=c.stocks,p.value=c.availableStock,i.value.length>0?(o.value=i.value[0].product,b.value=o.value.name):(o.value=null,b.value=null);else throw new Error("Product ID not provided")}catch(f){v.value=f.message||"Failed to fetch stocks"}finally{x.value=!1}},B=()=>{m.value=!0},D=()=>{m.value=!1};return N(()=>{S()}),(f,t)=>(s(),n(_,null,[e("div",A,[w(M,{title:"স্টক তালিকা",onAdd:B}),o.value?(s(),n("div",F,[e("div",O,[e("img",{src:o.value.photo,alt:"Product Photo",class:"w-20 h-20 object-cover rounded"},null,8,j),e("div",null,[e("h2",C,l(o.value.name),1),e("div",E,[e("p",$,[t[0]||(t[0]=e("b",null,"খুচরা মূল্য:",-1)),u(" "+l(Number(o.value.mrp).toLocaleString("bn-BD"))+" টাকা ",1)]),t[2]||(t[2]=u(" | ")),e("p",q,[t[1]||(t[1]=e("b",null,"বিক্রয় মূল্য:",-1)),u(" "+l(Number(o.value.selling_price).toLocaleString("bn-BD"))+" টাকা ",1)])]),e("ul",R,[(s(!0),n(_,null,g(o.value.authors,a=>(s(),n("li",{key:a.id,class:"text-gray-600"},l(a.name)+" (লেখক) ",1))),128)),(s(!0),n(_,null,g(o.value.translators,a=>(s(),n("li",{key:a.id,class:"text-gray-600"},l(a.name)+" (অনুবাদক) ",1))),128))])])]),e("div",T,[e("p",z,[t[3]||(t[3]=e("strong",null,"মোট স্টক: ",-1)),e("span",G,l(Number(p.value.total_stock).toLocaleString("bn-BD")),1),t[4]||(t[4]=u(" টি "))]),e("p",H,[t[5]||(t[5]=e("strong",null,"মোট বিক্রয়: ",-1)),e("span",null,l(Number(p.value.total_sold).toLocaleString("bn-BD")),1),t[6]||(t[6]=u(" টি "))]),e("p",J,[t[7]||(t[7]=e("strong",null,"বর্তমান স্টক: ",-1)),e("span",K,l(Number(p.value.available_stock).toLocaleString("bn-BD")),1),t[8]||(t[8]=u(" টি "))])])])):y("",!0),x.value?(s(),k(I,{key:1})):v.value?(s(),n("div",Q,[e("p",null,l(v.value),1)])):(s(),n("div",U,[e("table",W,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"bg-gray-200 text-left text-gray-700 uppercase text-sm"},[e("th",{class:"px-4 py-2 border text-center"},"তারিখ"),e("th",{class:"px-4 py-2 border text-center"},"স্টকের পরিমাণ"),e("th",{class:"px-4 py-2 border text-center"},"উৎপাদন/ক্রয় মূল্য")])],-1)),e("tbody",null,[(s(!0),n(_,null,g(i.value,a=>(s(),n("tr",{key:a.id},[e("td",X,l(new Date(a.stock_date).toLocaleDateString("bn-BD")),1),e("td",Y,l(Number(a.quantity).toLocaleString("bn-BD"))+" টি ",1),e("td",Z,l(Number(a.production_price).toLocaleString("bn-BD"))+" টাকা ",1)]))),128))])])]))]),m.value?(s(),k(V,{key:0,isOpen:m.value,productId:d.value,productName:b.value,onClose:D},null,8,["isOpen","productId","productName"])):y("",!0)],64))}};export{oe as default};
