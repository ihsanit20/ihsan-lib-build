import{M as P,r as i,n as E,c as n,a as e,d as c,t as _,f as v,F as m,g as F,o as a,b as D,v as M}from"./index-Bmm_wY_4.js";const N={class:"my-container space-y-4"},S={class:"card-bg p-4"},U={class:"flex w-full text-center gap-4 items-center"},j=["disabled"],B={key:0,class:"loader ml-4"},G={key:0,class:"text-green-500 mt-2"},V={key:1,class:"text-red-500 mt-2"},$={key:0,class:"text-center"},A={key:1,class:"text-center text-red-500"},I={class:"grid md:grid-cols-3 gap-4"},T=["src"],X={class:"mt-2"},q={class:"mt-2 flex gap-2 justify-center"},z=["onClick"],H={key:1,class:"text-sm"},J=["href"],K={class:"flex justify-between border-gray-200 mt-2"},O=["onClick"],Q=["onClick"],R={key:2},Z={__name:"PhotoGallery",setup(W){const o=P(),p=i(null),r=i(""),u=i(""),g=i(null),k=i(null),d=i(""),f=i(!1),b=l=>{p.value=l.target.files[0]},x=async()=>{if(!p.value)return;f.value=!0;const l=new FormData;l.append("photo",p.value);try{await o.uploadPhoto(l),r.value="Photo upload successful",u.value="",g.value.value=""}catch{r.value="",u.value="Failed to upload photo"}finally{f.value=!1,p.value=null}},h=async l=>{if(confirm("Are you sure you want to delete this photo?"))try{await o.deletePhoto(l)}catch(t){console.error("Error deleting photo:",t)}},w=l=>{k.value=l.id,d.value=l.link||""},C=async l=>{if(!d.value){alert("Please enter a valid link.");return}try{await o.updateLink(l.id,d.value),r.value="Link updated successfully",u.value="",l.link=d.value,k.value=null}catch{r.value="",u.value="Failed to update link"}},L=()=>{k.value=null};return E(async()=>{await o.fetchPhotos()}),(l,t)=>(a(),n("div",N,[t[7]||(t[7]=e("h1",{class:"text-2xl font-bold"},"Photo Gallery",-1)),e("div",S,[e("div",U,[e("input",{ref_key:"fileInput",ref:g,type:"file",onChange:b,class:"input-1"},null,544),e("button",{class:"btn-2",onClick:x,disabled:f.value},"Upload",8,j),f.value?(a(),n("div",B)):c("",!0)]),t[1]||(t[1]=e("p",{class:"text-center"},"ছবির সাইজ হতে হবে 1280px X 320px",-1)),r.value?(a(),n("p",G,_(r.value),1)):c("",!0),u.value?(a(),n("p",V,_(u.value),1)):c("",!0)]),v(o).loading?(a(),n("div",$,t[2]||(t[2]=[e("p",null,"Loading photos...",-1)]))):c("",!0),v(o).error?(a(),n("div",A,[e("p",null,_(v(o).error),1)])):c("",!0),e("div",I,[(a(!0),n(m,null,F(v(o).photos,s=>(a(),n("div",{key:s.id,class:"card-bg p-4"},[e("div",null,[e("img",{src:s.photo,alt:"Photo",class:"aspect-video object-cover rounded-md"},null,8,T)]),e("div",X,[k.value===s.id?(a(),n(m,{key:0},[t[3]||(t[3]=e("label",{class:"block text-sm font-medium"},"Edit Link:",-1)),D(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=y=>d.value=y),placeholder:"Enter new link",class:"input-1 w-full"},null,512),[[M,d.value]]),e("div",q,[e("button",{onClick:y=>C(s),class:"btn-2"},"Save",8,z),e("button",{onClick:L,class:"btn-contrast"},"Cancel")])],64)):(a(),n("p",H,[t[4]||(t[4]=e("strong",null,"Link: ",-1)),e("a",{href:s==null?void 0:s.link,target:"_blank",class:"text-blue-500 underline"},_((s==null?void 0:s.link)||"N/A"),9,J)]))]),t[5]||(t[5]=e("hr",null,null,-1)),e("div",K,[e("button",{onClick:y=>w(s),class:"btn-3"},"Edit Link",8,O),e("button",{onClick:y=>h(s.id),class:"btn-contrast"},"Delete",8,Q)])]))),128))]),v(o).photos.length===0?(a(),n("div",R,t[6]||(t[6]=[e("div",{class:"py-2 px-4 border-b border-gray-200"},"No photos found",-1)]))):c("",!0)]))}};export{Z as default};
