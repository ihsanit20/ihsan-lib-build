import{d as y,r as c,f as h}from"./vue-DFkF7ryY.js";import{b as u}from"./index-DG3aClSM.js";const q=y("order",()=>{const n=c([]),v=c(null),s=c(!1),l=c(null),i=h(()=>n.value.length);return{orders:n,order:v,loading:s,error:l,orderCount:i,fetchOrders:async(t={})=>{var r,a;s.value=!0,l.value=null;try{const e=new URLSearchParams(t).toString(),o=await u.get(`/orders${e?`?${e}`:""}`);n.value=o.data}catch(e){l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch orders"}finally{s.value=!1}},fetchOrder:async t=>{var r,a;s.value=!0,l.value=null;try{const e=await u.get(`/orders/${t}`);v.value=e.data}catch(e){l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch order"}finally{s.value=!1}},createOrder:async t=>{var r,a;s.value=!0,l.value=null;try{const e=await u.post("/orders",t);return n.value.push(e.data),e.data}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create order",e}finally{s.value=!1}},updateOrderStatus:async(t,r)=>{var a,e;s.value=!0,l.value=null;try{const o=await u.put(`/orders/${t}/status`,r),d=n.value.findIndex(f=>f.id===t);return d!==-1&&(n.value[d].status=r.status),o.data}catch(o){throw l.value=((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to update order status",o}finally{s.value=!1}},cancelOrder:async t=>{var r,a;s.value=!0,l.value=null;try{const e=await u.post(`/orders/${t}/cancel`),o=n.value.findIndex(d=>d.id===t);return o!==-1&&(n.value[o].status="Cancelled"),e.data}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to cancel order",e}finally{s.value=!1}},deleteOrder:async t=>{var r,a;s.value=!0,l.value=null;try{await u.delete(`/orders/${t}`),n.value=n.value.filter(e=>e.id!==t)}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete order",e}finally{s.value=!1}},fetchOrderReports:async(t={})=>{var r,a;s.value=!0,l.value=null;try{const e=new URLSearchParams(t).toString();return(await u.get(`/orders/report${e?`?${e}`:""}`)).data}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch reports",e}finally{s.value=!1}},onlineOrder:async t=>{var r,a;s.value=!0,l.value=null;try{const e=await u.post("/online-order",t);return n.value.push(e.data),e.data}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create order",e}finally{s.value=!1}},fetchMyOrders:async()=>{var t,r;s.value=!0,l.value=null;try{const a=await u.get("/my-orders");return n.value=a.data,a.data}catch(a){throw l.value=((r=(t=a.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to fetch my orders",a}finally{s.value=!1}},fetchMyOrder:async t=>{var r,a;s.value=!0,l.value=null;try{const e=await u.get(`/my-orders/${t}`);return v.value=e.data,e.data}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch my order",e}finally{s.value=!1}}}});export{q as u};
