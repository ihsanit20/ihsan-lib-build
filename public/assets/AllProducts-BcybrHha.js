import{p as k,r as x,q as w,e as S,c as r,a as o,b as _,s as b,F as g,x as p,m as a,y as h,i as m,t as y,k as q,o as s,z as C,L as V}from"./index-Bjjxt_l-.js";import{u as A}from"./category-BFy863Es.js";import{u as B}from"./author-DcR7I96x.js";const F={class:"my-container py-8 space-y-6"},P={class:"card-bg md:flex-row p-4 items-center md:space-x-4"},L={class:"flex items-center gap-3"},D=["value"],M={class:"flex items-center gap-3"},N=["value"],U={key:1,class:"text-red-500 text-center"},z={key:2,class:"text-center text-gray-500"},E={key:3,class:"grid grid-cols-2 lg:grid-cols-5 gap-4 md:gap-8"},H={__name:"AllProducts",setup(R){const i=q(),l=k(),f=A(),v=B(),d=x(i.query.category_id||""),n=x(i.query.author_id||""),u=async()=>{const c={};d.value&&(c.category_id=d.value),n.value&&(c.author_id=n.value),await l.fetchFilteredProducts(c)};return w(()=>i.query,()=>{d.value=i.query.category_id||"",n.value=i.query.author_id||"",u()}),S(async()=>{await f.fetchCategories(),await v.fetchAuthors(),await u()}),(c,e)=>(s(),r("div",F,[e[7]||(e[7]=o("h1",{class:"title-xl text-center"},"এক নজরে সকল বই",-1)),o("div",P,[o("div",L,[e[3]||(e[3]=o("label",{for:"category",class:"block text-sm font-medium text-gray-700"},"ক্যাটেগরি:",-1)),_(o("select",{id:"category","onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),onChange:u,class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[e[2]||(e[2]=o("option",{value:""},"সব ক্যাটেগরি",-1)),(s(!0),r(g,null,p(a(f).categories,t=>(s(),r("option",{key:t.id,value:t.id},y(t.name),9,D))),128))],544),[[b,d.value]])]),o("div",M,[e[5]||(e[5]=o("label",{for:"author",class:"block text-sm font-medium text-gray-700"},"লেখক:",-1)),_(o("select",{id:"author","onUpdate:modelValue":e[1]||(e[1]=t=>n.value=t),onChange:u,class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[e[4]||(e[4]=o("option",{value:""},"সব লেখক",-1)),(s(!0),r(g,null,p(a(v).authors,t=>(s(),r("option",{key:t.id,value:t.id},y(t.name),9,N))),128))],544),[[b,n.value]])])]),a(l).loading?(s(),h(V,{key:0})):m("",!0),a(l).error?(s(),r("div",U,y(a(l).error),1)):m("",!0),!a(l).loading&&a(l).products.length===0?(s(),r("div",z,e[6]||(e[6]=[o("p",null,"কোন পণ্য পাওয়া যায়নি।",-1)]))):m("",!0),a(l).products.length>0?(s(),r("div",E,[(s(!0),r(g,null,p(a(l).products,t=>(s(),h(C,{key:t.id,book:t},null,8,["book"]))),128))])):m("",!0)]))}};export{H as default};
