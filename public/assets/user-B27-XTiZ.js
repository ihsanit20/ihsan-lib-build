import{C as p,r as n,D as c}from"./index-DLpTp-Ox.js";const g=p("user",()=>{const o=n(null),s=n([]),r=n(null),u=n(!1),i=async()=>{u.value=!0,r.value=null;try{const e=await c.get("/users");s.value=(e==null?void 0:e.data)??[]}catch(e){l(e)}finally{u.value=!1}},v=async e=>{var t;u.value=!0,r.value=null;try{const a=await c.get("/user-search",{params:e});return((t=a==null?void 0:a.data)==null?void 0:t.status)==="found"?o.value=a.data.user:o.value=null,a==null?void 0:a.data}catch(a){throw l(a),a}finally{u.value=!1}},f=async e=>{try{const t=await c.post("/users",e);return s.value.push((t==null?void 0:t.data)??e),r.value=null,t.data}catch(t){throw t.response&&t.response.data?t.response.data:(l(t),t)}},h=async(e,t)=>{try{const a=await c.put(`/users/${e}`,t),d=s.value.findIndex(y=>y.id===e);d!==-1&&(s.value[d]=(a==null?void 0:a.data)??s.value[d]),r.value=null}catch(a){throw l(a),a}},l=e=>{var t,a;r.value=((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.message)||"An unexpected error occurred"};return{user:o,users:s,error:r,loading:u,fetchUsers:i,addUser:f,updateUser:h,searchUser:v}});export{g as u};
