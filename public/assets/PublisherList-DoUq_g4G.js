import{u as _}from"./publisher-CVnOwW8x.js";import{E as $,B as j,o as a,c as i,a as e,w as P,b as c,v as f,J as C,r as x,e as O,A as S,g as V,F as h,s as M,t as v,i as g,x as k}from"./index-BvY6-rbd.js";import{_ as D}from"./HeaderWithButtons-DwEmABGs.js";const N={class:"modal-bg"},A={class:"modal-card"},U={class:"flex justify-start items-center flex-wrap gap-4"},B={class:"flex justify-start items-center gap-2 border px-3 py-2"},E={class:"flex justify-start items-center gap-2 border px-3 py-2"},L=["checked"],I={class:"flex justify-end space-x-4"},q={__name:"EditPublisher",props:{publisher:Object},emits:["close","updated"],setup(w,{emit:p}){const r=p,l=w,o=$({name:"",is_own:!1,description:""}),u=_();j(()=>l.publisher,t=>{o.name=t.name||"",o.is_own=!!t.is_own,o.description=t.description||""},{immediate:!0});const m=async()=>{await u.updatePublisher(l.publisher.id,o),r("updated"),r("close"),u.fetchPublishers()};return(t,s)=>(a(),i("div",N,[e("div",A,[s[11]||(s[11]=e("h2",{class:"text-xl font-bold text-center"},"Edit Publisher",-1)),e("form",{onSubmit:P(m,["prevent"]),class:"space-y-4"},[e("div",null,[s[5]||(s[5]=e("label",null,"Name",-1)),c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>o.name=n),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[f,o.name]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"mb-2"},"Is Own Publisher",-1)),e("div",U,[e("label",B,[c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>o.is_own=n),type:"checkbox",class:"w-auto p-2 border rounded"},null,512),[[C,o.is_own]]),s[6]||(s[6]=e("span",{class:"pt-1"},"নিজস্ব প্রকাশক",-1))]),e("label",E,[e("input",{checked:!o.is_own,onClick:s[2]||(s[2]=n=>o.is_own=!1),type:"checkbox",class:"w-auto p-2 border rounded"},null,8,L),s[7]||(s[7]=e("span",{class:"pt-1"},"অন্য প্রকাশক",-1))])])]),e("div",null,[s[9]||(s[9]=e("label",null,"Description",-1)),c(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=n=>o.description=n),class:"w-full p-2 border rounded"},null,512),[[f,o.description]])]),e("div",I,[s[10]||(s[10]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"},"Save",-1)),e("button",{type:"button",onClick:s[4]||(s[4]=n=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded"}," Cancel ")])],32)])]))}},z={class:"modal-bg"},F={class:"modal-card"},J={class:"flex justify-start items-center flex-wrap gap-4"},T={class:"flex justify-start items-center gap-2 border px-3 py-2"},G={class:"flex justify-start items-center gap-2 border px-3 py-2"},H=["checked"],K={class:"flex justify-end space-x-4"},Q={__name:"AddPublisher",emits:["close","saved"],setup(w,{emit:p}){const r=p,l=$({name:"",is_own:!1,description:""}),o=_(),u=async()=>{await o.createPublisher(l),r("saved"),r("close"),o.fetchPublishers()};return(m,t)=>(a(),i("div",z,[e("div",F,[t[11]||(t[11]=e("h2",{class:"text-xl font-bold text-center"},"Add Publisher",-1)),e("form",{onSubmit:P(u,["prevent"]),class:"space-y-4"},[e("div",null,[t[5]||(t[5]=e("label",null,"Name",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.name=s),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[f,l.name]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"mb-2"},"Is Own Publisher",-1)),e("div",J,[e("label",T,[c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.is_own=s),type:"checkbox",class:"w-auto p-2 border rounded"},null,512),[[C,l.is_own]]),t[6]||(t[6]=e("span",{class:"pt-1"},"নিজস্ব প্রকাশক",-1))]),e("label",G,[e("input",{checked:!l.is_own,onClick:t[2]||(t[2]=s=>l.is_own=!1),type:"checkbox",class:"w-auto p-2 border rounded"},null,8,H),t[7]||(t[7]=e("span",{class:"pt-1"},"অন্য প্রকাশক",-1))])])]),e("div",null,[t[9]||(t[9]=e("label",null,"Description",-1)),c(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.description=s),class:"w-full p-2 border rounded"},null,512),[[f,l.description]])]),e("div",K,[t[10]||(t[10]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"},"Save",-1)),e("button",{type:"button",onClick:t[4]||(t[4]=s=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded"}," Cancel ")])],32)])]))}},R={class:"my-container space-y-4"},W={class:"overflow-x-auto bg-white shadow rounded-lg"},X={class:"table-auto w-full border-collapse border border-gray-200"},Y={key:0},Z={key:1},ee={class:"px-4 py-3 border border-gray-200"},se={class:"px-4 py-3 border border-gray-200"},te={class:"px-4 py-3 border border-gray-200"},le={class:"px-4 py-3 border border-gray-200 text-center"},oe=["onClick"],re={key:0,class:"mt-4 text-red-600 text-sm text-center"},ue={__name:"PublisherList",setup(w){const p=_(),r=x(!1),l=x(null),o=x(null),u=x(!0);O(async()=>{try{await p.fetchPublishers()}catch(b){o.value=b.message}finally{u.value=!1}});const m=S(()=>[...p.publishers].sort((b,d)=>new Date(d.created_at)-new Date(b.created_at))),t=b=>{l.value=b,r.value=!0},s=()=>{l.value=null,r.value=!0},n=()=>{r.value=!1,l.value=null};return(b,d)=>(a(),i(h,null,[e("div",R,[V(D,{title:"Publisher List",onAdd:s}),e("div",W,[e("table",X,[d[2]||(d[2]=e("thead",null,[e("tr",{class:"bg-gray-200 text-left text-gray-700 uppercase text-sm tracking-wider"},[e("th",{class:"px-4 py-3 border border-gray-200"},"ID"),e("th",{class:"px-4 py-3 border border-gray-200"},"Name"),e("th",{class:"px-4 py-3 border border-gray-200"},"Is Own"),e("th",{class:"px-4 py-3 border border-gray-200 text-center"},"Actions")])],-1)),e("tbody",null,[u.value?(a(),i("tr",Y,d[0]||(d[0]=[e("td",{colspan:"3",class:"text-center py-6"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("div",{class:"w-6 h-6 border-4 border-t-4 border-gray-300 rounded-full animate-spin"}),e("span",null,"Loading...")])],-1)]))):m.value.length===0?(a(),i("tr",Z,d[1]||(d[1]=[e("td",{colspan:"3",class:"text-center py-6 text-gray-500"},"No publishers found",-1)]))):(a(!0),i(h,{key:2},M(m.value,y=>(a(),i("tr",{key:y.id,class:"hover:bg-gray-50 transition ease-in-out"},[e("td",ee,v(y.id),1),e("td",se,v(y.name),1),e("td",te,v(y.is_own?"নিজস্ব প্রকাশক":"অন্য প্রকাশক"),1),e("td",le,[e("button",{class:"btn-primary py-1 px-3 rounded-md text-white bg-blue-500 hover:bg-blue-600 transition",onClick:ne=>t(y)}," Edit ",8,oe)])]))),128))])])]),o.value?(a(),i("div",re,v(o.value),1)):g("",!0)]),r.value&&l.value?(a(),k(q,{key:0,publisher:l.value,isOpen:r.value,onClose:n,class:"z-50"},null,8,["publisher","isOpen"])):g("",!0),r.value&&!l.value?(a(),k(Q,{key:1,isOpen:r.value,onClose:n,class:"z-50"},null,8,["isOpen"])):g("",!0)],64))}};export{ue as default};
