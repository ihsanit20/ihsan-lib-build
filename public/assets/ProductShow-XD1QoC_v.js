import{d as M,L as O}from"./index-CzRLlVKe.js";import{j as T,r as i,k as q,c as a,b as e,x as G,e as D,w as E,m as H,u as J,a as _,t as n,p as r,F as b,h,o}from"./vue-DFkF7ryY.js";import"./vendor-BtuGy7By.js";const K={class:"my-container space-y-4"},Q={class:"flex justify-between gap-4"},W={key:1,class:"grid md:grid-cols-3 md:gap-8 gap-4 bg-white shadow rounded-lg p-6"},X={class:"space-y-4 flex flex-col items-center"},Y={class:"relative w-full flex items-center justify-center"},Z={for:"photo-input",class:"flex w-full cursor-pointer"},ee=["src"],te={class:"flex justify-center"},le={key:1,class:"btn-2 opacity-50 cursor-not-allowed",disabled:""},se={class:"md:flex hidden"},oe={class:"flex flex-col items-center gap-2"},ae=["src"],ne={class:"md:col-span-2 grid gap-4"},ie={class:"title-lg"},de={class:"flex gap-2 text-sm"},ue={class:""},re={class:""},ce={class:"list-disc list-inside"},pe={class:"list-disc list-inside"},fe={class:"text-lg font-semibold"},ve={class:"text-lg font-semibold"},me={class:"text-gray-700"},ge={class:"flex md:hidden"},_e={class:"flex flex-col items-center gap-2"},be=["src"],Be={__name:"ProductShow",setup(he){const c=M(),v=T().params.id,l=i(null),x=i(null),m=i(null),p=i(null),u=i(!1),f=i(!1),g=i(!1),$=d=>{const t=d.target.files[0];t&&(p.value=t,f.value=!0,x.value=URL.createObjectURL(t))},z=async()=>{if(!(!p.value||!l.value))try{u.value=!0,await c.uploadPhoto(l.value.id,p.value),p.value=null,f.value=!1}catch(d){console.error("Failed to upload photo:",d)}finally{u.value=!1,await c.fetchProduct(v)}};q(async()=>{try{g.value=!0,await c.fetchProduct(v),l.value=c.product}catch(d){console.error("Failed to fetch product:",d)}finally{g.value=!1}});const A=()=>{m.value&&m.value.click()};return(d,t)=>{var k,w,B,L,N,P,S,I,C,F,R,U,j,V;const y=H("RouterLink");return o(),a("div",K,[e("div",Q,[D(y,{to:{name:"ProductList"},class:"btn-3"},{default:E(()=>t[0]||(t[0]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),_:1}),t[2]||(t[2]=e("h1",{class:"title-md md:title-xl flex-wrap text-center"},"পণ্য বিস্তারিত",-1)),D(y,{to:{name:"ProductEdit",params:{id:J(v)}},class:"btn-2"},{default:E(()=>t[1]||(t[1]=[e("i",{class:"far fa-edit"},null,-1),e("span",{class:"hidden md:flex"},"এডিট",-1)])),_:1},8,["to"])]),g.value?(o(),G(O,{key:0})):(o(),a("div",W,[e("div",X,[e("div",Y,[e("label",Z,[e("img",{src:x.value||((k=l.value)==null?void 0:k.photo),alt:"Photo",class:"rounded-md w-full object-cover"},null,8,ee)]),e("input",{id:"photo-input",ref_key:"fileInputRef",ref:m,type:"file",accept:"image/*",class:"hidden",onChange:$},null,544),!f.value&&!u.value?(o(),a("button",{key:0,onClick:A,class:"btn-icon absolute top-4 right-4 cursor-pointer opacity-50 hover:opacity-100 z-10"},t[3]||(t[3]=[e("i",{class:"fas fa-camera"},null,-1)]))):_("",!0)]),e("div",te,[f.value&&!u.value?(o(),a("button",{key:0,class:"btn-2",onClick:z}," Upload Photo ")):_("",!0),u.value?(o(),a("button",le," Uploading... ")):_("",!0)]),e("div",se,[e("div",oe,[e("img",{src:`data:image/png;base64,${(w=l.value)==null?void 0:w.barcode_image}`,alt:"Barcode Image"},null,8,ae),e("p",null,n((B=l.value)==null?void 0:B.barcode),1)])])]),e("div",ne,[e("h1",ie,n((L=l.value)==null?void 0:L.name),1),e("div",de,[e("p",ue,[t[4]||(t[4]=e("b",null,"খুচরা মূল্য:",-1)),r(" "+n(Number((N=l.value)==null?void 0:N.mrp).toLocaleString("bn-BD"))+" টাকা ",1)]),t[6]||(t[6]=r(" | ")),e("p",re,[t[5]||(t[5]=e("b",null,"বিক্রয় মূল্য:",-1)),r(" "+n(Number((P=l.value)==null?void 0:P.selling_price).toLocaleString("bn-BD"))+" টাকা ",1)])]),e("div",null,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold"},"লেখক ও অনুবাদক:",-1)),e("ul",ce,[(o(!0),a(b,null,h((S=l.value)==null?void 0:S.authors,s=>(o(),a("li",{key:s.id},n(s==null?void 0:s.name)+" (লেখক)",1))),128)),(o(!0),a(b,null,h((I=l.value)==null?void 0:I.translators,s=>(o(),a("li",{key:s.id},n(s==null?void 0:s.name)+" (অনুবাদক) ",1))),128))])]),e("div",null,[t[8]||(t[8]=e("h2",{class:"text-lg font-semibold"},"ক্যাটাগরি:",-1)),e("ul",pe,[(o(!0),a(b,null,h((C=l.value)==null?void 0:C.categories,s=>(o(),a("li",{key:s},n(s),1))),128))])]),e("p",fe,[t[9]||(t[9]=e("b",null,"স্টক:",-1)),r(" "+n(Number((F=l.value)==null?void 0:F.available_stock).toLocaleString("bn-BD"))+" টি ",1)]),e("p",ve,[t[10]||(t[10]=e("b",null,"ISBN:",-1)),r(" "+n(((R=l.value)==null?void 0:R.ISBN)||"N/A"),1)]),e("div",null,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold"},"বিস্তারিত:",-1)),e("p",me,n(((U=l.value)==null?void 0:U.description)||"No description available."),1)]),e("div",ge,[e("div",_e,[e("img",{src:`data:image/png;base64,${(j=l.value)==null?void 0:j.barcode_image}`,alt:"Barcode Image"},null,8,be),e("p",null,n((V=l.value)==null?void 0:V.barcode),1)])])])]))])}}};export{Be as default};
