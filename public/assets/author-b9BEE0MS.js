import{d as v,r as c}from"./vue-DFkF7ryY.js";import{b as h}from"./index-CeP2vO6E.js";const $=v("author",()=>{const l=c([]),d=c(null),r=c(!1),s=c(null);return{authors:l,author:d,loading:r,error:s,fetchAuthors:async()=>{var o,t;r.value=!0,s.value=null;try{const a=await h.get("/authors");l.value=a.data}catch(a){s.value=((t=(o=a.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to fetch authors"}finally{r.value=!1}},fetchAuthor:async o=>{var t,a;r.value=!0,s.value=null;try{const e=await h.get(`/authors/${o}`);d.value=e.data}catch(e){s.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch author"}finally{r.value=!1}},createAuthor:async o=>{var t,a;r.value=!0,s.value=null;try{const e=await h.post("/authors",o);l.value.push(e.data)}catch(e){throw s.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to create author",e}finally{r.value=!1}},updateAuthor:async(o,t)=>{var a,e;r.value=!0,s.value=null;try{const u=await h.put(`/authors/${o}`,t),n=l.value.findIndex(p=>p.id===o);n!==-1&&(l.value[n]=u.data)}catch(u){throw s.value=((e=(a=u.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to update author",u}finally{r.value=!1}},deleteAuthor:async o=>{var t,a;r.value=!0,s.value=null;try{await h.delete(`/authors/${o}`),l.value=l.value.filter(e=>e.id!==o)}catch(e){throw s.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to delete author",e}finally{r.value=!1}},uploadPhoto:async(o,t)=>{var e,u;r.value=!0,s.value=null;const a=new FormData;a.append("photo",t);try{return(await h.post(`/authors/${o}/photo`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw s.value=((u=(e=n.response)==null?void 0:e.data)==null?void 0:u.message)||"Failed to upload photo",n}finally{r.value=!1}}}});export{$ as u};
