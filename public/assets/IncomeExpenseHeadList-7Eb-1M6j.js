import{_ as M}from"./HeaderWithButtons-Cm-cp0eq.js";import{u as _}from"./income-expense-head-ChOSN81B.js";import{M as O,m as j,c as d,o as l,a as m,b as e,t as y,F as f,h as I,l as L,s as B,J as N,e as E,u as S,f as $,r as g,k as T,x as w}from"./vue-D0mF8XVW.js";const F={key:0},q={class:"flex justify-center items-center flex-wrap gap-4 pt-1"},z=["checked","onClick"],D={class:"pt-1"},V={class:"flex justify-between space-x-4"},J=["disabled"],C={__name:"IncomeExpenseHeadForm",props:{loading:Boolean,type:String,incomeExpenseHead:{type:Object,default:()=>({name:"",type:""})}},emits:["submit","close"],setup(o,{emit:c}){const a=c,i=o,n={Income:"Income (আয়)",Expense:"Expense (ব্যয়)"},s=O({name:"",type:i.type||""});return j(()=>i.incomeExpenseHead,r=>{s.name=r.name||"",s.type=r.type||i.type||""},{immediate:!0}),(r,t)=>(l(),d("form",{onSubmit:t[2]||(t[2]=N(p=>a("submit",s),["prevent"])),class:"space-y-4"},[o.type?m("",!0):(l(),d("div",F,[e("label",null,y(o.type||"Income Expense")+" Type",1),e("div",q,[(l(),d(f,null,I(n,(p,x)=>e("label",{key:x,class:"flex justify-start items-center gap-2 border px-3 py-2"},[e("input",{checked:s.type===x,onClick:h=>s.type=x,type:"radio",class:"w-auto p-2 border rounded",name:"type",required:""},null,8,z),e("span",D,y(p),1)])),64))])])),e("div",null,[e("label",null,y(n[s.type])+" এর খাত",1),L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>s.name=p),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[B,s.name]])]),t[3]||(t[3]=e("hr",{class:"my-2"},null,-1)),e("div",V,[e("button",{type:"button",onClick:t[1]||(t[1]=p=>a("close")),class:"bg-gray-500 text-white px-4 py-2 rounded"}," Cancel "),e("button",{type:"submit",disabled:o.loading,class:"bg-blue-500 text-white px-4 py-2 rounded"}," Save ",8,J)])],32))}},U={class:"modal-bg"},G={class:"modal-card max-w-md"},K={class:"text-xl font-bold text-center"},P={__name:"AddIncomeExpenseHead",props:{type:String},emits:["close","saved"],setup(o,{emit:c}){const a=c,i=o,n=_(),s=async r=>{await n.createIncomeExpenseHead(r),a("saved"),a("close"),n.fetchIncomeExpenseHeads({type:i.type})};return(r,t)=>(l(),d("div",U,[e("div",G,[e("h2",K,"Add "+y(o.type||"Income Expense")+" Head",1),t[1]||(t[1]=e("hr",{class:"my-2"},null,-1)),E(C,{loading:S(n).loading,onSubmit:s,onClose:t[0]||(t[0]=p=>a("close")),type:o.type},null,8,["loading","type"])])]))}},Q={class:"modal-bg"},R={class:"modal-card"},W={__name:"EditIncomeExpenseHead",props:{incomeExpenseHead:Object,type:String},emits:["close","updated"],setup(o,{emit:c}){const a=c,i=o,n=_(),s=async r=>{await n.updateIncomeExpenseHead(i.incomeExpenseHead.id,r),a("updated"),a("close"),n.fetchIncomeExpenseHeads({type:i.type})};return(r,t)=>(l(),d("div",Q,[e("div",R,[t[1]||(t[1]=e("h2",{class:"text-xl font-bold text-center"},"Edit Income Expense Head",-1)),t[2]||(t[2]=e("hr",{class:"my-2"},null,-1)),E(C,{loading:S(n).loading,onSubmit:s,incomeExpenseHead:o.incomeExpenseHead,onClose:t[0]||(t[0]=p=>a("close")),type:o.type},null,8,["loading","incomeExpenseHead","type"])])]))}},X={class:"my-container space-y-4"},Y={class:"overflow-x-auto bg-white shadow rounded-lg"},Z={class:"table-auto w-full border-collapse border border-gray-200"},ee={class:"bg-gray-200 text-left text-gray-700 uppercase text-sm tracking-wider"},te={key:0,class:"px-4 py-3 border border-gray-200"},se={key:0},ne=["colspan"],oe={key:1},ae=["colspan"],le={class:"px-4 py-3 border border-gray-200 text-center"},re={key:0,class:"px-4 py-3 border border-gray-200"},de={class:"px-4 py-3 border border-gray-200"},ce={class:"px-4 py-3 border border-gray-200 text-center"},ie=["onClick"],pe={key:0,class:"mt-4 text-red-600 text-sm text-center"},be={__name:"IncomeExpenseHeadList",props:{title:{type:String,default:"Head List"},type:{type:String,default:"All"}},setup(o){const c=o,a=$(()=>c.type==="All"),i=_(),n=g(!1),s=g(null),r=g(null),t=g(!0);T(async()=>{try{await i.fetchIncomeExpenseHeads(c.type==="All"?{}:{type:c.type})}catch(b){r.value=b.message}finally{t.value=!1}});const p=$(()=>[...i.incomeExpenseHeads]),x=b=>{s.value=b,n.value=!0},h=()=>{s.value=null,n.value=!0},H=()=>{n.value=!1,s.value=null};return(b,u)=>{var k;return l(),d(f,null,[e("div",X,[E(M,{title:o.title,onAdd:h},null,8,["title"]),e("div",Y,[e("table",Z,[e("thead",null,[e("tr",ee,[u[0]||(u[0]=e("th",{class:"px-4 py-3 border border-gray-200 text-center"},"#",-1)),a.value?(l(),d("th",te,"Type")):m("",!0),u[1]||(u[1]=e("th",{class:"px-4 py-3 border border-gray-200"},"Name",-1)),u[2]||(u[2]=e("th",{class:"px-4 py-3 border border-gray-200 text-center"},"Actions",-1))])]),e("tbody",null,[t.value?(l(),d("tr",se,[e("td",{colspan:a.value?4:3,class:"text-center py-6"},u[3]||(u[3]=[e("div",{class:"flex justify-center items-center space-x-2"},[e("div",{class:"w-6 h-6 border-4 border-t-4 border-gray-300 rounded-full animate-spin"}),e("span",null,"Loading...")],-1)]),8,ne)])):p.value.length===0?(l(),d("tr",oe,[e("td",{colspan:a.value?4:3,class:"text-center py-6 text-gray-500"}," No Heads found ",8,ae)])):(l(!0),d(f,{key:2},I(p.value,(v,A)=>(l(),d("tr",{key:v.id,class:"hover:bg-gray-50 transition ease-in-out"},[e("td",le,y(A+1),1),a.value?(l(),d("td",re,y(v.type),1)):m("",!0),e("td",de,y(v.name),1),e("td",ce,[e("button",{class:"btn-primary py-1 px-3 rounded-md text-white bg-blue-500 hover:bg-blue-600 transition",onClick:ue=>x(v)}," Edit ",8,ie)])]))),128))])])]),r.value?(l(),d("div",pe,y(r.value),1)):m("",!0)]),n.value&&s.value?(l(),w(W,{key:0,incomeExpenseHead:s.value,isOpen:n.value,onClose:H,class:"z-50",type:(k=s.value)==null?void 0:k.type},null,8,["incomeExpenseHead","isOpen","type"])):m("",!0),n.value&&!s.value?(l(),w(P,{key:1,isOpen:n.value,onClose:H,class:"z-50",type:c.type==="All"?null:c.type},null,8,["isOpen","type"])):m("",!0)],64)}}};export{be as _};
