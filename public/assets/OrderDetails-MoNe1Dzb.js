import{G as $,h as c,l as A,c as a,a as t,f as J,p as K,z as Q,t as l,b as U,d as n,F as W,r as X,e as Y,q as Z,H as tt,s as st,o as r,L as et}from"./index-BCex656m.js";import{u as lt}from"./order-BU9WLL4z.js";const ot={class:"my-container space-y-4"},nt={class:"flex items-center justify-between gap-2 print:hidden"},rt={key:1,class:"text-red-600 text-center print:hidden"},at={key:2},dt={class:"card-bg p-6"},ut={class:"flex justify-center items-center"},it=["src"],pt={class:"space-y-1"},ct={class:"flex justify-between"},bt={class:"text-sm text-black"},yt={class:"text-sm text-black"},gt={class:"text-sm flex justify-between"},ft={class:"grid md:grid-cols-2 gap-1"},mt={class:"overflow-x-auto bg-white"},xt={class:"table-auto w-full border-collapse border border-gray-600 text-black"},vt={class:"px-2 py-2 border border-gray-300"},_t={class:"px-2 py-2 border border-gray-300 text-center"},Lt={class:"px-2 py-2 border border-gray-300 text-center"},kt={class:"px-2 py-2 border border-gray-300 text-end"},wt={class:"grid md:grid-cols-2 gap-4"},Bt={class:"p-4 rounded-lg"},St={class:"w-full text-right text-sm md:text-base"},Dt={class:"py-1"},Nt={class:"py-1 font-semibold"},ht={class:"py-1"},Ct={class:"py-1"},jt={class:"py-1 font-bold"},It={class:"py-1 font-bold"},Ot={class:"py-1"},Vt={class:"flex justify-center space-x-4"},Pt={__name:"OrderDetails",setup(qt){const E=Z(),b=lt(),y=$(),g=c(null),e=c(null),f=c(!0),d=c(null);A(async()=>{try{g.value=E.params.id,await b.fetchOrder(g.value),e.value=b.order,await y.fetchCompanyInfo()}catch(u){d.value=u.message}finally{f.value=!1}});const G=async u=>{var s,i;try{await b.cancelOrder(u),e.value.status="Cancelled"}catch(p){d.value=((i=(s=p.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to cancel order"}},H=()=>{tt.go(-1)},M=()=>{window.print()};return(u,s)=>{var p,m,x,v,_,L,k,w,B,S,D,N,h,C,j,I,O,V,q,F,R,P,T;const i=st("RouterLink");return r(),a("div",ot,[t("div",nt,[t("button",{class:"btn-3",onClick:H},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[3]||(s[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"অর্ডার বিস্তারিত",-1)),J(i,{to:{name:"OrderCreate"},class:"btn-2"},{default:K(()=>s[2]||(s[2]=[t("span",{class:"hidden md:flex"},"নতুন অর্ডার",-1),t("i",{class:"far fa-plus"},null,-1)])),_:1})]),f.value?(r(),Q(et,{key:0})):d.value?(r(),a("div",rt,l(d.value),1)):(r(),a("div",at,[t("div",dt,[t("div",ut,[t("img",{src:((m=(p=U(y))==null?void 0:p.companyInfo)==null?void 0:m.logo)||"https://placehold.co/200x100/0284c7/white?text=IhsanIT",alt:"Company Logo",class:"h-20"},null,8,it)]),s[19]||(s[19]=t("div",{class:"flex justify-center"},[t("h1",{class:"text-2xl font-bold"},"ক্যাশ ম্যামো")],-1)),t("div",pt,[t("div",ct,[t("p",bt,[s[4]||(s[4]=t("b",null,"অর্ডার নং :",-1)),n(" "+l(Number((x=e.value)==null?void 0:x.id).toLocaleString("bn-BD")),1)]),t("p",yt,[s[5]||(s[5]=t("b",null,"তারিখ: ",-1)),n(" "+l(new Date((v=e.value)==null?void 0:v.created_at).toLocaleDateString("bn-BD")),1)])]),t("div",gt,[t("p",null,[s[6]||(s[6]=t("strong",null,"ধরণ: ",-1)),n(" "+l((_=e.value)==null?void 0:_.type),1)]),t("p",null,[s[7]||(s[7]=t("strong",null,"অবস্থা: ",-1)),t("span",null,l((L=e.value)==null?void 0:L.status),1)])])]),s[20]||(s[20]=t("hr",null,null,-1)),t("div",ft,[t("p",null,[s[8]||(s[8]=t("strong",null,"ক্রেতার নাম:",-1)),n(" "+l((w=(k=e.value)==null?void 0:k.user)==null?void 0:w.name),1)]),t("p",null,[s[9]||(s[9]=t("strong",null,"ফোন:",-1)),n(" "+l((S=(B=e.value)==null?void 0:B.user)==null?void 0:S.phone),1)]),t("p",null,[s[10]||(s[10]=t("strong",null,"ঠিকানা:",-1)),n(" "+l((N=(D=e.value)==null?void 0:D.user)==null?void 0:N.address),1)]),t("p",null,[s[11]||(s[11]=t("strong",null,"আইডি:",-1)),n(" "+l(Number((C=(h=e.value)==null?void 0:h.user)==null?void 0:C.id).toLocaleString("bn-BD")),1)])]),s[21]||(s[21]=t("hr",null,null,-1)),s[22]||(s[22]=t("div",{class:"flex justify-center py-2"},[t("p",{class:"font-medium text-lg border-4 border-double px-4 rounded-full border-gray-400"}," পণ্য বিবরণ ")],-1)),t("div",mt,[t("table",xt,[s[12]||(s[12]=t("thead",null,[t("tr",{class:"bg-gray-200 text-left uppercase text-sm tracking-wider"},[t("th",{class:"px-2 py-2 border border-gray-200"},"পণ্যের নাম"),t("th",{class:"px-2 py-2 border border-gray-200 text-center"},"পরিমান"),t("th",{class:"px-2 py-2 border border-gray-200 text-center"},"দর"),t("th",{class:"px-2 py-2 border border-gray-200 text-end"},"দাম")])],-1)),t("tbody",null,[(r(!0),a(W,null,X((j=e.value)==null?void 0:j.order_details,o=>{var z;return r(),a("tr",{key:o.id,class:"hover:bg-gray-50 transition ease-in-out"},[t("td",vt,l((z=o==null?void 0:o.product)==null?void 0:z.name),1),t("td",_t,l(Number(o.quantity).toLocaleString("bn-BD"))+" টি ",1),t("td",Lt," ৳ "+l(Number(o.price).toLocaleString("bn-BD")),1),t("td",kt," ৳ "+l(Number(o.quantity*o.price).toLocaleString("bn-BD")),1)])}),128))])])]),t("div",wt,[s[18]||(s[18]=t("div",null,null,-1)),t("div",Bt,[t("table",St,[t("tbody",null,[t("tr",null,[s[13]||(s[13]=t("td",{class:"py-1 font-semibold"},"মোট মূল্য:",-1)),t("td",Dt,"৳ "+l(Number((I=e.value)==null?void 0:I.total_price).toLocaleString("bn-BD")),1)]),t("tr",null,[t("td",Nt," ডিস্কাউন্ট ("+l(Number((O=e.value)==null?void 0:O.discount_percentage).toLocaleString("bn-BD"))+"%): ",1),t("td",ht," ৳ "+l(Number((V=e.value)==null?void 0:V.discount_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[14]||(s[14]=t("td",{class:"py-1 font-semibold"},"বাট্টা:",-1)),t("td",Ct,"৳ "+l(Number((q=e.value)==null?void 0:q.adjust_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[15]||(s[15]=t("td",{class:"py-1 font-semibold"},"পরিশোধযোগ্য পরিমান:",-1)),t("td",jt," ৳ "+l(Number((F=e.value)==null?void 0:F.payable_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[16]||(s[16]=t("td",{class:"py-1 font-semibold"},"পরিশোধ:",-1)),t("td",It," ৳ "+l(Number((R=e.value)==null?void 0:R.paid_amount).toLocaleString("bn-BD")),1)]),t("tr",null,[s[17]||(s[17]=t("td",{class:"py-1 font-semibold"},"বাকী:",-1)),t("td",Ot,"৳ "+l(Number((P=e.value)==null?void 0:P.due_amount).toLocaleString("bn-BD")),1)])])])])])])])),t("div",Vt,[t("button",{onClick:M,class:"btn-3"},s[23]||(s[23]=[t("i",{class:"fas fa-print pr-1"},null,-1),n(" প্রিন্ট করুন ")])),((T=e.value)==null?void 0:T.status)==="Pending"?(r(),a("button",{key:0,class:"btn-contrast",onClick:s[0]||(s[0]=o=>G(e.value.id))}," ক্যানসেল করুন ")):Y("",!0)])])}}};export{Pt as default};
