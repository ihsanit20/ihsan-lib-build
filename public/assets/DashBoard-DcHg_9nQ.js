import{r as b,k as h,f as N,m as z,c as p,o as u,b as t,a as v,e as k,w as T,F as $,h as A,t as a,p as _,l as R,s as E,u as x,n as g,M as F,x as S}from"./vue-DFkF7ryY.js";import{L as U,f as Y,u as q}from"./index-O5G5k-zH.js";import{u as G}from"./order-D35vRK0e.js";import{u as J}from"./payment-D-Aej5rW.js";import{u as K}from"./summary-ClFMX-UI.js";import"./vendor-BtuGy7By.js";const Q={class:"my-container space-y-4"},W={class:"flex justify-between items-center gap-2"},X={class:"overflow-x-auto bg-white shadow rounded-lg"},Z={class:"table-auto w-full border-collapse border border-gray-200"},tt={key:0},et={colspan:"11",class:"text-center py-6"},st={key:1},at={class:"px-4 py-3 border border-gray-200"},ot={class:"px-4 py-3 border border-gray-200"},lt={class:"px-4 py-3 border border-gray-200"},nt={class:"px-4 py-3 border border-gray-200"},rt={class:"px-4 py-3 border border-gray-200"},dt={class:"min-w-max"},it={class:"px-4 py-3 border border-gray-200"},ut={class:"px-4 py-3 border border-gray-200"},ct={class:"px-4 py-3 border border-gray-200 text-center"},pt=["onClick"],mt={class:"px-4 py-3 border border-gray-200"},yt={class:"px-4 py-3 border border-gray-200"},xt={class:"min-w-max"},ft={class:"px-4 py-3 border border-gray-200 text-center"},bt={class:"flex justify-center gap-4"},_t={key:0,class:"mt-4 text-red-600 text-sm text-center"},vt={key:0,class:"modal-bg"},gt={class:"modal-card"},ht={class:"mt-4"},wt=["max"],kt={__name:"DailyOrderList",setup(w){const i=G(),l=J(),m=b(null),y=b(!0),n=b(!1),e=b(null),r=b(0),o=b(new Date().toISOString().slice(0,10));h(async()=>{await D()});const c=N(()=>[...i.orders].sort((f,s)=>new Date(s.order_date)-new Date(f.order_date))),I=f=>{e.value=f,r.value=f.due_amount,n.value=!0},C=()=>{e.value=null,r.value=0,n.value=!1},P=async()=>{try{if(!e.value||r.value<=0){alert("Invalid payment amount");return}await l.collectDue({order_id:e.value.id,amount:r.value,payment_method:"Cash",remarks:"Collected via modal"}),alert("Payment collected successfully"),C(),D()}catch(f){console.log(f),alert(l.error||"Failed to collect due payment")}},D=async()=>{y.value=!0;try{await i.fetchOrders({date:o.value})}catch(f){m.value=f.message}finally{y.value=!1}};return(f,s)=>{var M,j,L,O,B;const V=z("RouterLink");return u(),p($,null,[t("div",Q,[t("div",W,[s[2]||(s[2]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"আজকের অর্ডার তালিকা",-1)),k(V,{to:{name:"OrderCreate"},class:"btn-2"},{default:T(()=>s[1]||(s[1]=[t("span",{class:"hidden lg:inline"},"অর্ডার তৈরী",-1),t("i",{class:"far fa-plus"},null,-1)])),_:1})]),t("div",X,[t("table",Z,[s[5]||(s[5]=t("thead",null,[t("tr",{class:"bg-gray-200 text-left text-gray-700 text-sm tracking-wider"},[t("th",{class:"px-4 py-3 border border-gray-200"},"#"),t("th",{class:"px-4 py-3 border border-gray-200"},"কাস্টমার"),t("th",{class:"px-4 py-3 border text-center"},"ধরন"),t("th",{class:"px-4 py-3 border text-center"},"মোট"),t("th",{class:"px-4 py-3 border text-center"},"ছাড়"),t("th",{class:"px-4 py-3 border text-center"},"বাট্টা"),t("th",{class:"px-4 py-3 border text-center"},"পরিশোধ"),t("th",{class:"px-4 py-3 border text-center"},"বাকী"),t("th",{class:"px-4 py-3 border text-center"},"অবস্থা"),t("th",{class:"px-4 py-3 border text-center"},"তারিখ"),t("th",{class:"px-4 py-3 border text-center"},"একশন")])],-1)),t("tbody",null,[y.value?(u(),p("tr",tt,[t("td",et,[k(U,{class:"shadow-none"})])])):c.value.length===0?(u(),p("tr",st,s[3]||(s[3]=[t("td",{colspan:"11",class:"text-center py-6 text-gray-500"},"No orders found",-1)]))):(u(!0),p($,{key:2},A(c.value,d=>{var H;return u(),p("tr",{key:d.id,class:"hover:bg-gray-50 transition ease-in-out"},[t("td",at,a(d.id),1),t("td",ot,a((H=d==null?void 0:d.user)==null?void 0:H.name),1),t("td",lt,a(d.type),1),t("td",nt,a(d.total_price),1),t("td",rt,[t("p",dt," ("+a(d.discount_percentage)+"%) "+a(d.discount_amount),1)]),t("td",it,a(d.adjust_amount),1),t("td",ut,a(d.paid_amount),1),t("td",ct,[t("p",null,a(d.due_amount),1),d.due_amount>0?(u(),p("button",{key:0,class:"btn-link text-red-600 text-sm",onClick:Rt=>I(d)}," বাকী আদায় ",8,pt)):v("",!0)]),t("td",mt,a(d.status),1),t("td",yt,[t("p",xt,a(new Date(d.created_at).toLocaleString("bn-BD")),1)]),t("td",ft,[t("div",bt,[k(V,{to:{name:"OrderDetails",params:{id:d.id}},class:"btn-icon"},{default:T(()=>s[4]||(s[4]=[t("i",{class:"fas fa-eye"},null,-1)])),_:2},1032,["to"])])])])}),128))])])]),m.value?(u(),p("div",_t,a(m.value),1)):v("",!0)]),n.value?(u(),p("div",vt,[t("div",gt,[s[10]||(s[10]=t("h2",{class:"text-lg font-bold mb-4"},"Collect Payment",-1)),t("p",null,[s[6]||(s[6]=t("strong",null,"অর্ডার নং:",-1)),_(" "+a((M=e.value)==null?void 0:M.id),1)]),t("p",null,[s[7]||(s[7]=t("strong",null,"ক্রেতা:",-1)),_(" "+a((L=(j=e.value)==null?void 0:j.user)==null?void 0:L.name),1)]),t("p",null,[s[8]||(s[8]=t("strong",null,"বাকী:",-1)),_(" ৳"+a((O=e.value)==null?void 0:O.due_amount),1)]),t("div",ht,[s[9]||(s[9]=t("label",{for:"payment-amount",class:"block text-sm font-medium"},"পরিশোধ যোগ্য",-1)),R(t("input",{id:"payment-amount",type:"number",class:"w-full p-2 border rounded mt-1","onUpdate:modelValue":s[0]||(s[0]=d=>r.value=d),min:1,max:(B=e.value)==null?void 0:B.due_amount},null,8,wt),[[E,r.value]])]),t("div",{class:"flex justify-center mt-6 space-x-2"},[t("button",{class:"btn-3",onClick:C},"Cancel"),t("button",{class:"btn-2",onClick:P},"Submit")])])])):v("",!0)],64)}}},St={class:"flex flex-col md:flex-row gap-y-2 gap-x-8 justify-center md:justify-between items-center flex-wrap text-2xl pt-2"},$t={class:"space-x-1"},Ct={class:"space-x-1"},Dt={__name:"TodaysFinanceSummary",setup(w){const i=K(),l=b(m(new Date));function m(n){const e=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0");return`${e}-${r}-${o}`}const y=async()=>{await i.fetchSummary({start_date:l.value,end_date:l.value})};return h(async()=>{await y()}),(n,e)=>(u(),p("div",{class:g(["card-bg p-4 md:px-8",{"animate-pulse opacity-50":x(i).loading}])},[t("div",St,[t("div",$t,[e[0]||(e[0]=t("span",null,"আজকের আয়:",-1)),t("b",null,a(x(i).totalIncomes),1),e[1]||(e[1]=_(" টাকা "))]),t("div",Ct,[e[2]||(e[2]=t("span",null,"আজকের ব্যয়:",-1)),t("b",null,a(x(i).totalExpenses),1),e[3]||(e[3]=_(" টাকা "))]),t("div",{class:g(x(i).profit>=0?"text-green-600":"text-red-600")},[e[4]||(e[4]=_(" আজকের উদ্বৃত্ত: ")),t("b",null,a(x(i).profit),1),e[5]||(e[5]=_(" টাকা "))],2)])],2))}},Vt={class:"text-lg space-x-1"},Mt={class:"overflow-x-auto"},jt={class:"grid grid-cols-24 gap-1 md:gap-2 min-w-max pt-8"},Lt={class:"flex flex-col gap-1 justify-center items-center absolute left-0 right-0 top-0 bottom-0 z-20 text-xs"},Ot={class:"-rotate-90"},Bt={class:"-rotate-90"},Ht={class:"absolute bottom-full left-0 right-0 w-full text-center text-xs pb-1"},Tt={__name:"TodayHourlyVisitorCartVue",setup(w){const i=b(120),l=Y();h(async()=>{await l.fetchTrackStats()});const m=N(()=>Math.max(...l.hourlyStats.map(r=>r.visits))),y=r=>{const o=l.hourlyStats.find(c=>c.hour===r);return!o||!m.value?0:Math.round(i.value*(o.visits/m.value))},n=r=>{const o=l.hourlyStats.find(c=>c.hour===r);return!o||!m.value?0:o.visits},e=r=>{const o=r>=12?"PM":"AM";return`${r%12===0?12:r%12} ${o}`};return(r,o)=>(u(),p("div",{class:g(["card-bg p-4 md:p-8",{"animate-pulse":x(l).loading}])},[t("div",Vt,[o[0]||(o[0]=t("b",null,"*",-1)),o[1]||(o[1]=t("span",null,"আজকের ইউনিক ভিজিটর:",-1)),t("b",null,a(x(l).totalVisitsToday),1),o[2]||(o[2]=_(" জন। ")),o[3]||(o[3]=t("span",null,"প্রতি ঘন্টায় ভিজিটর:",-1))]),t("div",Mt,[t("div",jt,[(u(),p($,null,A(24,c=>t("div",{key:c},[t("div",{class:"border w-full relative min-w-8 content-center rounded",style:F({height:`${i.value}px`})},[t("div",Lt,[t("div",Ot,a(e(c!=24?c:0)),1),o[4]||(o[4]=t("div",{class:"rotate-90"},"-",-1)),t("div",Bt,a(e(c-1)),1)]),t("div",Ht,a(n(c-1)),1),t("div",{class:"absolute bottom-0 left-0 right-0 w-full bg-sky-600/70 rounded",style:F({height:`${y(c-1)}px`})},null,4)],4)])),64))])])],2))}},Ft={class:"my-container space-y-4 md:space-y-8"},Nt={class:"card-bg p-4 md:px-8"},At={class:"flex items-center justify-between gap-4"},It={class:"shrink-0 grow-0"},Pt={class:"title-md text-3xl space-x-2"},zt={class:"title-md text-3xl space-x-2"},Kt={__name:"DashBoard",setup(w){const i=q(),l=b(!1);h(async()=>{await m()});const m=async(y=!1)=>{l.value=!0,(!i.user||y)&&await i.fetchUser(),l.value=!1};return(y,n)=>(u(),p("div",Ft,[t("div",Nt,[t("div",At,[t("div",It,[t("button",{onClick:n[0]||(n[0]=e=>m(!0)),type:"button",class:"btn-3 space-x-1 py-1"},n[1]||(n[1]=[t("i",{class:"fas fa-sync text-lg"},null,-1),t("span",{class:"hidden md:inline text-base pt-1"}," Reload ",-1)]))]),x(i).user?(u(),p("div",{key:0,class:g(["shrink grow flex justify-end gap-4 md:text-2xl pt-1.5",{"animate-pulse opacity-50":l.value}])},[t("p",Pt,[n[2]||(n[2]=t("i",{class:"fas fa-user-circle text-gray-400"},null,-1)),t("span",null,a(x(i).user.name),1)]),t("p",zt,[n[3]||(n[3]=t("i",{class:"fas fa-phone-alt text-gray-400"},null,-1)),t("span",null,a(x(i).user.phone),1)])],2)):v("",!0)])]),l.value?v("",!0):(u(),S(Dt,{key:0})),l.value?v("",!0):(u(),S(Tt,{key:1})),l.value?v("",!0):(u(),S(kt,{key:2}))]))}};export{Kt as default};
