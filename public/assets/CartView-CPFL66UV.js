import{r as v,c as n,a as m,o as a,b as e,t as x,J as M,l as h,s as y,x as E,u as _,F as w,h as j,p as g,i as B,e as I}from"./vue-DFkF7ryY.js";import{u as $,a as N,_ as U}from"./index-rzlRsLqz.js";import"./vendor-BtuGy7By.js";const A={key:0,class:"modal-bg"},L={class:"modal-card"},R={class:"text-xl font-bold mb-4 text-center"},T={class:"mb-4"},q=["disabled"],D={key:0,class:"mb-4"},F={key:1,class:"mb-4"},P={type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded w-full"},Y={__name:"AuthModal",setup(C){const b=$(),p=v(!0),l=v(""),u=v(""),i=v(""),r=v(1),d=v(!1),t=()=>{p.value=!1},s=async()=>{try{if(!l.value)return;const c=await b.checkPhone(l.value);d.value=c,r.value=2}catch(c){console.error("Error checking phone:",c)}},k=async()=>{try{if(!l.value||!i.value)return;await b.login(l.value,i.value),t()}catch(c){console.error("Error logging in:",c)}},S=async()=>{try{if(!l.value||!i.value||!u.value)return;await b.register(u.value,l.value,i.value),t()}catch(c){console.error("Error registering:",c)}},V=async()=>{r.value===1?await s():d.value?await k():await S()};return(c,o)=>p.value?(a(),n("div",A,[e("div",L,[e("h2",R,x(r.value===1?"ফোন নাম্বার দিন":d.value?"লগইন করুন":"রেজিস্টার করুন"),1),e("form",{onSubmit:M(V,["prevent"])},[e("div",T,[o[3]||(o[3]=e("label",{for:"phone",class:"block mb-1 text-gray-700"},"ফোন নাম্বার",-1)),h(e("input",{id:"phone","onUpdate:modelValue":o[0]||(o[0]=f=>l.value=f),type:"text",placeholder:"আপনার ফোন নাম্বার",class:"w-full border px-3 py-2 rounded",disabled:r.value===2},null,8,q),[[y,l.value]])]),r.value===2&&!d.value?(a(),n("div",D,[o[4]||(o[4]=e("label",{for:"name",class:"block mb-1 text-gray-700"},"নাম",-1)),h(e("input",{id:"name","onUpdate:modelValue":o[1]||(o[1]=f=>u.value=f),type:"text",placeholder:"আপনার নাম",class:"w-full border px-3 py-2 rounded"},null,512),[[y,u.value]])])):m("",!0),r.value===2?(a(),n("div",F,[o[5]||(o[5]=e("label",{for:"password",class:"block mb-1 text-gray-700"},"পাসওয়ার্ড",-1)),h(e("input",{id:"password","onUpdate:modelValue":o[2]||(o[2]=f=>i.value=f),type:"password",placeholder:"আপনার পাসওয়ার্ড",class:"w-full border px-3 py-2 rounded"},null,512),[[y,i.value]])])):m("",!0),e("button",P,x(r.value===1?"জয়েন":d.value?"লগইন":"রেজিস্টার"),1)],32),e("button",{type:"button",onClick:t,class:"absolute top-2 right-2 text-gray-500 hover:text-gray-700"}," × ")])])):m("",!0)}},J={class:"my-container space-y-6 py-6"},O={key:0,class:"card-bg p-3 md:p-4"},Q={class:"space-y-4"},z={class:"w-14 md:w-16"},G=["src","alt"],H={class:"flex-1 flex flex-col justify-between h-full"},K={class:"text-xs md:text-lg font-semibold line-clamp-2"},W={class:"text-xs md:text-sm text-gray-600 mb-1 mt-px"},X={key:0,class:"text-gray-300 text-xs"},Z=["onClick"],ee={class:"font-semibold absolute right-0 bottom-4 md:text-lg text-sky-700"},te={class:"flex justify-end gap-4 items-center md:py-4"},se={class:"text-xl font-semibold"},oe={key:1},ne={__name:"CartView",setup(C){const b=B(),p=N(),l=$(),u=v(!1),i=()=>{l.isLoggedIn?b.push({name:"CheckOut"}):u.value=!0},r=()=>p.cartItems.reduce((d,t)=>d+t.selling_price*t.quantity,0);return(d,t)=>(a(),n(w,null,[e("div",J,[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold"},"Your Cart",-1)),_(p).cartItems.length>0?(a(),n("div",O,[e("div",Q,[(a(!0),n(w,null,j(_(p).cartItems,s=>(a(),n("div",{key:s.id,class:"flex gap-x-4 border-b pb-4 relative"},[e("div",z,[e("img",{src:s.photo,alt:s.name,class:"grow-0 shrink-0 w-full aspect-[3/4] object-cover rounded shadow"},null,8,G)]),e("div",H,[e("h2",K,x(s.name),1),e("p",W,[t[1]||(t[1]=g(" মূল্য: ")),s.mrp>s.selling_price?(a(),n("del",X," ৳"+x(s.mrp),1)):m("",!0),g(" ৳"+x(s.selling_price),1)]),I(U,{book:s},null,8,["book"])]),e("i",{onClick:k=>_(p).updateQuantity(s,0),class:"fas fa-trash-alt text-red-400 cursor-pointer"},null,8,Z),e("div",ee," মোট: ৳"+x(s.selling_price*s.quantity),1)]))),128))]),e("div",te,[t[2]||(t[2]=e("h2",{class:"text-xl font-bold"},"মোট মূল্য:",-1)),e("span",se,"৳"+x(r()),1)]),e("div",{class:"flex justify-center gap-4 items-center"},[e("button",{onClick:i,class:"btn-2"},t[3]||(t[3]=[g(" চেকআউট করুন "),e("i",{class:"fas fa-arrow-right"},null,-1)]))])])):(a(),n("div",oe,t[4]||(t[4]=[e("p",{class:"text-gray-500 text-center"},"Your cart is empty.",-1)])))]),u.value?(a(),E(Y,{key:0,onClose:t[0]||(t[0]=s=>u.value=!1)})):m("",!0)],64))}};export{ne as default};
