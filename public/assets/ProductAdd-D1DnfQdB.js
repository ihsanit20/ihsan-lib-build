import{p as z,r as u,e as G,c as s,a as l,w as H,b as n,v as C,s as I,F as p,x as b,m as f,t as c,i as J,o as a,d as K}from"./index-Bjjxt_l-.js";import{u as O}from"./publisher-Bn4LVVn4.js";import{u as Q}from"./category-BFy863Es.js";import{u as W}from"./author-DcR7I96x.js";const X={class:"my-container space-y-4"},Y={class:"flex items-center justify-between gap-2"},Z=["disabled"],ee={class:"card-bg md:p-8 p-4"},le={class:"grid grid-cols-2 gap-4"},te={class:"grid md:grid-cols-2 gap-4"},se=["value"],ae={class:"p-4 border-2 rounded-md"},ue={class:"flex flex-wrap gap-2"},oe=["onClick"],ne={class:"mt-2 relative"},de=["value","disabled"],ie={class:"p-4 border-2 rounded-md"},re={class:"flex flex-wrap gap-2"},ve=["onClick"],me={class:"mt-2 relative"},ce=["value","disabled"],pe={class:"p-4 border-2 rounded-md"},be={class:"flex flex-wrap gap-2"},fe=["onClick"],xe={class:"mt-2 relative"},ge=["value","disabled"],ye={key:0,class:"text-red-500 text-sm"},ke={class:"flex justify-center"},we=["disabled"],Ce={key:0},Se={key:1},Ue={__name:"ProductAdd",setup(he){const M=K(),T=z(),A=O(),N=Q(),k=W(),S=u(""),h=u(""),P=u(""),_=u(""),V=u(""),B=u(""),d=u([]),x=u(null),i=u([]),g=u(null),r=u([]),y=u(null),w=u(!1),U=u(null);G(async()=>{await N.fetchCategories(),await k.fetchAuthors(),await A.fetchPublishers()});const F=()=>{x.value&&!d.value.includes(x.value)&&d.value.push(x.value),x.value=null},$=o=>{d.value=d.value.filter(e=>e!==o)},j=()=>{g.value&&!i.value.includes(g.value)&&i.value.push(g.value),g.value=null},D=o=>{i.value=i.value.filter(e=>e!==o)},L=()=>{y.value&&!r.value.includes(y.value)&&r.value.push(y.value),y.value=null},E=o=>{r.value=r.value.filter(e=>e!==o)},q=async()=>{w.value=!0,U.value=null;try{const o=[...i.value.map(e=>({id:e,role:"author"})),...r.value.map(e=>({id:e,role:"translator"}))];await T.createProduct({name:S.value,publisher_id:h.value,ISBN:V.value,description:B.value,categories:d.value,authors:o,mrp:P.value,selling_price:_.value}),S.value="",h.value="",V.value="",B.value="",d.value=[],i.value=[],r.value=[],P.value="",_.value="",alert("Product created successfully!")}catch(o){U.value=o.message||"Failed to create product"}finally{w.value=!1}},R=()=>{M.go(-1)};return(o,e)=>(a(),s("div",X,[l("div",Y,[l("button",{class:"btn-3",onClick:R},e[9]||(e[9]=[l("i",{class:"far fa-arrow-left"},null,-1),l("span",{class:"hidden md:flex"},"Back",-1)])),e[11]||(e[11]=l("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Create New Product",-1)),l("button",{class:"btn-2",onClick:q,disabled:w.value},e[10]||(e[10]=[l("span",{class:"hidden md:flex"},"নতুন বই",-1),l("i",{class:"far fa-save"},null,-1)]),8,Z)]),l("div",ee,[l("form",{onSubmit:H(q,["prevent"]),class:"space-y-6"},[l("div",null,[e[12]||(e[12]=l("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"পণ্যের নাম",-1)),n(l("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>S.value=t),type:"text",class:"input-1",required:""},null,512),[[C,S.value]])]),l("div",le,[l("div",null,[e[13]||(e[13]=l("label",{for:"mrp",class:"block text-sm font-medium text-gray-700"},"মুদ্রিত মূল্য",-1)),n(l("input",{id:"mrp","onUpdate:modelValue":e[1]||(e[1]=t=>P.value=t),type:"number",class:"input-1",required:""},null,512),[[C,P.value]])]),l("div",null,[e[14]||(e[14]=l("label",{for:"sellingPrice",class:"block text-sm font-medium text-gray-700"}," বিক্রয় মূল্য ",-1)),n(l("input",{id:"sellingPrice","onUpdate:modelValue":e[2]||(e[2]=t=>_.value=t),type:"number",class:"input-1",required:""},null,512),[[C,_.value]])])]),l("div",te,[l("div",null,[e[15]||(e[15]=l("label",{for:"ISBN",class:"block text-sm font-medium text-gray-700"},"ISBN",-1)),n(l("input",{id:"ISBN","onUpdate:modelValue":e[3]||(e[3]=t=>V.value=t),type:"text",class:"input-1"},null,512),[[C,V.value]])]),l("div",null,[e[17]||(e[17]=l("label",{for:"publisherId",class:"block text-sm font-medium text-gray-700"}," Publisher ",-1)),n(l("select",{id:"publisherId","onUpdate:modelValue":e[4]||(e[4]=t=>h.value=t),class:"input-1",required:""},[e[16]||(e[16]=l("option",{value:"",disabled:""},"-- Select Publisher --",-1)),(a(!0),s(p,null,b(f(A).publishers,t=>(a(),s("option",{key:t.id,value:t.id},c(t.name),9,se))),128))],512),[[I,h.value]])])]),l("div",null,[e[18]||(e[18]=l("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," বিস্তারিত বিবরণ ",-1)),n(l("textarea",{id:"description","onUpdate:modelValue":e[5]||(e[5]=t=>B.value=t),rows:"4",class:"input-1"},null,512),[[C,B.value]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ক্যাটাগরি",-1)),l("div",ae,[l("div",ue,[(a(!0),s(p,null,b(d.value,t=>{var v;return a(),s("div",{key:t,class:"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full"},[l("span",null,c((v=f(N).categories.find(m=>m.id===t))==null?void 0:v.name),1),l("button",{type:"button",onClick:m=>$(t),class:"ml-2 text-blue-500 hover:text-blue-800"}," × ",8,oe)])}),128))]),l("div",ne,[n(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>x.value=t),onChange:F,class:"input-1"},[e[19]||(e[19]=l("option",{value:"",disabled:""},"- সিলেক্ট ক্যাটাগরি -",-1)),(a(!0),s(p,null,b(f(N).categories,t=>(a(),s("option",{key:t.id,value:t.id,disabled:d.value.includes(t.id)},c(t.name),9,de))),128))],544),[[I,x.value]])])])]),l("div",null,[e[22]||(e[22]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"লেখক",-1)),l("div",ie,[l("div",re,[(a(!0),s(p,null,b(i.value,t=>{var v;return a(),s("div",{key:t,class:"flex items-center bg-green-100 text-green-700 px-3 py-1 rounded-full"},[l("span",null,c((v=f(k).authors.find(m=>m.id===t))==null?void 0:v.name),1),l("button",{type:"button",onClick:m=>D(t),class:"ml-2 text-green-500 hover:text-green-800"}," × ",8,ve)])}),128))]),l("div",me,[n(l("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>g.value=t),onChange:j,class:"input-1"},[e[21]||(e[21]=l("option",{value:"",disabled:""},"- সিলেক্ট লেখক -",-1)),(a(!0),s(p,null,b(f(k).authors,t=>(a(),s("option",{key:t.id,value:t.id,disabled:i.value.includes(t.id)},c(t.name),9,ce))),128))],544),[[I,g.value]])])])]),l("div",null,[e[24]||(e[24]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"অনুবাদক",-1)),l("div",pe,[l("div",be,[(a(!0),s(p,null,b(r.value,t=>{var v;return a(),s("div",{key:t,class:"flex items-center bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full"},[l("span",null,c((v=f(k).authors.find(m=>m.id===t))==null?void 0:v.name),1),l("button",{type:"button",onClick:m=>E(t),class:"ml-2 text-yellow-500 hover:text-yellow-800"}," × ",8,fe)])}),128))]),l("div",xe,[n(l("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>y.value=t),onChange:L,class:"input-1"},[e[23]||(e[23]=l("option",{value:"",disabled:""},"- সিলেক্ট অনুবাদক -",-1)),(a(!0),s(p,null,b(f(k).authors,t=>(a(),s("option",{key:t.id,value:t.id,disabled:r.value.includes(t.id)},c(t.name),9,ge))),128))],544),[[I,y.value]])])])]),U.value?(a(),s("div",ye,c(U.value),1)):J("",!0),l("div",ke,[l("button",{type:"submit",disabled:w.value,class:"btn-2"},[w.value?(a(),s("span",Ce,"Loading...")):(a(),s("span",Se,"Create Product"))],8,we)])],32)])]))}};export{Ue as default};
