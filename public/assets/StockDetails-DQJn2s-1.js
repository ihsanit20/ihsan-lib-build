import{r as n,k as N,c as r,b as t,x as y,a as k,e as w,t as l,p as u,F as _,h as g,j as L,o as s}from"./vue-DFkF7ryY.js";import{u as I,_ as P}from"./AddStock-DZarPyN6.js";import{L as V}from"./index-imp_TQtg.js";import{_ as M}from"./HeaderWithButtons-BYuVYrIe.js";import"./vendor-BtuGy7By.js";const A={class:"my-container space-y-4"},F={key:0,class:"card-bg p-4"},O={class:"flex md:flex-row flex-col items-center gap-4"},j=["src"],C={class:"title-md"},E={class:"flex gap-2 text-sm"},$={class:""},q={class:""},R={class:"list-disc list-inside mt-2"},T={class:"flex md:flex-row flex-col gap-2 md:gap-4"},z={class:"text-lg font-medium text-sky-600"},G={class:""},H={class:"text-lg font-medium text-red-700"},J={class:"text-lg font-medium text-green-600"},K={class:""},Q={key:2,class:"text-red-600"},U={key:3,class:"overflow-x-auto bg-white shadow rounded-lg"},W={class:"table-auto w-full border-collapse border border-gray-200"},X={class:"px-4 py-2 border text-center"},Y={class:"px-4 py-2 border text-center"},Z={class:"px-4 py-2 border text-center"},rt={__name:"StockDetails",setup(tt){const h=L(),c=I(),d=n(null),b=n(null),i=n([]),o=n(null),p=n(null),x=n(!1),v=n(null),m=n(!1),S=async()=>{try{if(x.value=!0,v.value=null,d.value=h.params.id,d.value)await Promise.all([c.fetchStocksByProductId(d.value),c.fetchAvailableStockByProductId(d.value)]),i.value=c.stocks,p.value=c.availableStock,i.value.length>0?(o.value=i.value[0].product,b.value=o.value.name):(o.value=null,b.value=null);else throw new Error("Product ID not provided")}catch(f){v.value=f.message||"Failed to fetch stocks"}finally{x.value=!1}},B=()=>{m.value=!0},D=()=>{m.value=!1};return N(()=>{S()}),(f,e)=>(s(),r(_,null,[t("div",A,[w(M,{title:"স্টক তালিকা",onAdd:B}),o.value?(s(),r("div",F,[t("div",O,[t("img",{src:o.value.photo,alt:"Product Photo",class:"w-20 h-20 object-cover rounded"},null,8,j),t("div",null,[t("h2",C,l(o.value.name),1),t("div",E,[t("p",$,[e[0]||(e[0]=t("b",null,"খুচরা মূল্য:",-1)),u(" "+l(Number(o.value.mrp).toLocaleString("bn-BD"))+" টাকা ",1)]),e[2]||(e[2]=u(" | ")),t("p",q,[e[1]||(e[1]=t("b",null,"বিক্রয় মূল্য:",-1)),u(" "+l(Number(o.value.selling_price).toLocaleString("bn-BD"))+" টাকা ",1)])]),t("ul",R,[(s(!0),r(_,null,g(o.value.authors,a=>(s(),r("li",{key:a.id,class:"text-gray-600"},l(a.name)+" (লেখক) ",1))),128)),(s(!0),r(_,null,g(o.value.translators,a=>(s(),r("li",{key:a.id,class:"text-gray-600"},l(a.name)+" (অনুবাদক) ",1))),128))])])]),t("div",T,[t("p",z,[e[3]||(e[3]=t("strong",null,"মোট স্টক: ",-1)),t("span",G,l(Number(p.value.total_stock).toLocaleString("bn-BD")),1),e[4]||(e[4]=u(" টি "))]),t("p",H,[e[5]||(e[5]=t("strong",null,"মোট বিক্রয়: ",-1)),t("span",null,l(Number(p.value.total_sold).toLocaleString("bn-BD")),1),e[6]||(e[6]=u(" টি "))]),t("p",J,[e[7]||(e[7]=t("strong",null,"বর্তমান স্টক: ",-1)),t("span",K,l(Number(p.value.available_stock).toLocaleString("bn-BD")),1),e[8]||(e[8]=u(" টি "))])])])):k("",!0),x.value?(s(),y(V,{key:1})):v.value?(s(),r("div",Q,[t("p",null,l(v.value),1)])):(s(),r("div",U,[t("table",W,[e[9]||(e[9]=t("thead",null,[t("tr",{class:"bg-gray-200 text-left text-gray-700 uppercase text-sm"},[t("th",{class:"px-4 py-2 border text-center"},"তারিখ"),t("th",{class:"px-4 py-2 border text-center"},"স্টকের পরিমাণ"),t("th",{class:"px-4 py-2 border text-center"},"উৎপাদন/ক্রয় মূল্য")])],-1)),t("tbody",null,[(s(!0),r(_,null,g(i.value,a=>(s(),r("tr",{key:a.id},[t("td",X,l(new Date(a.stock_date).toLocaleDateString("bn-BD")),1),t("td",Y,l(Number(a.quantity).toLocaleString("bn-BD"))+" টি ",1),t("td",Z,l(Number(a.production_price).toLocaleString("bn-BD"))+" টাকা ",1)]))),128))])])]))]),m.value?(s(),y(P,{key:0,isOpen:m.value,productId:d.value,productName:b.value,onClose:D},null,8,["isOpen","productId","productName"])):k("",!0)],64))}};export{rt as default};
