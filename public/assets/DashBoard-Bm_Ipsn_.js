import{r as v,k,f as A,m as U,c as p,o as i,b as t,a as g,e as D,w as F,F as V,h as P,t as s,p as _,l as z,s as R,u as x,n as S,M as N,x as C}from"./vue-DFkF7ryY.js";import{L as E,f as Y,u as q}from"./index-DgqlB-jz.js";import{u as G}from"./order-BI28_vEU.js";import{u as J}from"./payment-C5dphRb7.js";import{u as K}from"./summary-DDP2l1jp.js";import"./vendor-BtuGy7By.js";const Q={class:"my-container space-y-4"},W={class:"flex justify-between items-center gap-2"},X={class:"overflow-x-auto bg-white shadow rounded-lg"},Z={class:"table-auto w-full border-collapse border border-gray-200"},tt={key:0},et={colspan:"11",class:"text-center py-6"},st={key:1},at={class:"px-4 py-3 border border-gray-200"},ot={class:"px-4 py-3 border border-gray-200"},lt={class:"px-4 py-3 border border-gray-200"},nt={class:"px-4 py-3 border border-gray-200"},rt={class:"px-4 py-3 border border-gray-200"},dt={class:"min-w-max"},it={class:"px-4 py-3 border border-gray-200"},ut={class:"px-4 py-3 border border-gray-200"},ct={class:"px-4 py-3 border border-gray-200 text-center"},pt=["onClick"],mt={class:"px-4 py-3 border border-gray-200"},yt={class:"px-4 py-3 border border-gray-200"},xt={class:"min-w-max"},ft={class:"px-4 py-3 border border-gray-200 text-center"},vt={class:"flex justify-center gap-4"},bt={key:0,class:"mt-4 text-red-600 text-sm text-center"},_t={key:0,class:"modal-bg"},gt={class:"modal-card"},ht={class:"mt-4"},wt=["max"],St={__name:"DailyOrderList",setup($){const r=G(),d=J(),y=v(null),u=v(!0),l=v(!1),e=v(null),f=v(0),h=v(new Date().toISOString().slice(0,10));k(async()=>{await M()});const w=A(()=>[...r.orders].sort((b,a)=>new Date(a.order_date)-new Date(b.order_date))),m=b=>{e.value=b,f.value=b.due_amount,l.value=!0},o=()=>{e.value=null,f.value=0,l.value=!1},c=async()=>{try{if(!e.value||f.value<=0){alert("Invalid payment amount");return}await d.collectDue({order_id:e.value.id,amount:f.value,payment_method:"Cash",remarks:"Collected via modal"}),alert("Payment collected successfully"),o(),M()}catch(b){console.log(b),alert(d.error||"Failed to collect due payment")}},M=async()=>{u.value=!0;try{await r.fetchOrders({date:h.value})}catch(b){y.value=b.message}finally{u.value=!1}};return(b,a)=>{var L,O,T,B,H;const j=U("RouterLink");return i(),p(V,null,[t("div",Q,[t("div",W,[a[2]||(a[2]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"আজকের অর্ডার তালিকা",-1)),D(j,{to:{name:"OrderCreate"},class:"btn-2"},{default:F(()=>a[1]||(a[1]=[t("span",{class:"hidden lg:inline"},"অর্ডার তৈরী",-1),t("i",{class:"far fa-plus"},null,-1)])),_:1})]),t("div",X,[t("table",Z,[a[5]||(a[5]=t("thead",null,[t("tr",{class:"bg-gray-200 text-left text-gray-700 text-sm tracking-wider"},[t("th",{class:"px-4 py-3 border border-gray-200"},"#"),t("th",{class:"px-4 py-3 border border-gray-200"},"কাস্টমার"),t("th",{class:"px-4 py-3 border text-center"},"ধরন"),t("th",{class:"px-4 py-3 border text-center"},"মোট"),t("th",{class:"px-4 py-3 border text-center"},"ছাড়"),t("th",{class:"px-4 py-3 border text-center"},"বাট্টা"),t("th",{class:"px-4 py-3 border text-center"},"পরিশোধ"),t("th",{class:"px-4 py-3 border text-center"},"বাকী"),t("th",{class:"px-4 py-3 border text-center"},"অবস্থা"),t("th",{class:"px-4 py-3 border text-center"},"তারিখ"),t("th",{class:"px-4 py-3 border text-center"},"একশন")])],-1)),t("tbody",null,[u.value?(i(),p("tr",tt,[t("td",et,[D(E,{class:"shadow-none"})])])):w.value.length===0?(i(),p("tr",st,a[3]||(a[3]=[t("td",{colspan:"11",class:"text-center py-6 text-gray-500"},"No orders found",-1)]))):(i(!0),p(V,{key:2},P(w.value,n=>{var I;return i(),p("tr",{key:n.id,class:"hover:bg-gray-50 transition ease-in-out"},[t("td",at,s(n.id),1),t("td",ot,s((I=n==null?void 0:n.user)==null?void 0:I.name),1),t("td",lt,s(n.type),1),t("td",nt,s(n.total_price),1),t("td",rt,[t("p",dt," ("+s(n.discount_percentage)+"%) "+s(n.discount_amount),1)]),t("td",it,s(n.adjust_amount),1),t("td",ut,s(n.paid_amount),1),t("td",ct,[t("p",null,s(n.due_amount),1),n.due_amount>0?(i(),p("button",{key:0,class:"btn-link text-red-600 text-sm",onClick:Et=>m(n)}," বাকী আদায় ",8,pt)):g("",!0)]),t("td",mt,s(n.status),1),t("td",yt,[t("p",xt,s(new Date(n.created_at).toLocaleString("bn-BD")),1)]),t("td",ft,[t("div",vt,[D(j,{to:{name:"OrderDetails",params:{id:n.id}},class:"btn-icon"},{default:F(()=>a[4]||(a[4]=[t("i",{class:"fas fa-eye"},null,-1)])),_:2},1032,["to"])])])])}),128))])])]),y.value?(i(),p("div",bt,s(y.value),1)):g("",!0)]),l.value?(i(),p("div",_t,[t("div",gt,[a[10]||(a[10]=t("h2",{class:"text-lg font-bold mb-4"},"Collect Payment",-1)),t("p",null,[a[6]||(a[6]=t("strong",null,"অর্ডার নং:",-1)),_(" "+s((L=e.value)==null?void 0:L.id),1)]),t("p",null,[a[7]||(a[7]=t("strong",null,"ক্রেতা:",-1)),_(" "+s((T=(O=e.value)==null?void 0:O.user)==null?void 0:T.name),1)]),t("p",null,[a[8]||(a[8]=t("strong",null,"বাকী:",-1)),_(" ৳"+s((B=e.value)==null?void 0:B.due_amount),1)]),t("div",ht,[a[9]||(a[9]=t("label",{for:"payment-amount",class:"block text-sm font-medium"},"পরিশোধ যোগ্য",-1)),z(t("input",{id:"payment-amount",type:"number",class:"w-full p-2 border rounded mt-1","onUpdate:modelValue":a[0]||(a[0]=n=>f.value=n),min:1,max:(H=e.value)==null?void 0:H.due_amount},null,8,wt),[[R,f.value]])]),t("div",{class:"flex justify-center mt-6 space-x-2"},[t("button",{class:"btn-3",onClick:o},"Cancel"),t("button",{class:"btn-2",onClick:c},"Submit")])])])):g("",!0)],64)}}},kt={class:"flex gap-y-2 gap-x-2 md:gap-x-8 justify-between items-center flex-wrap text-sm md:text-2xl pt-1 md:pt-2"},$t={class:"space-x-1"},Dt={class:"space-x-1"},Ct={__name:"TodaysFinanceSummary",setup($){const r=K(),d=v(y(new Date));function y(l){const e=l.getFullYear(),f=String(l.getMonth()+1).padStart(2,"0"),h=String(l.getDate()).padStart(2,"0");return`${e}-${f}-${h}`}const u=async()=>{await r.fetchSummary({start_date:d.value,end_date:d.value})};return k(async()=>{await u()}),(l,e)=>(i(),p("div",{class:S(["card-bg p-3 md:px-8",{"animate-pulse opacity-50":x(r).loading}])},[t("div",kt,[t("div",$t,[e[0]||(e[0]=t("span",null,"আজকের আয়:",-1)),t("b",null,s(x(r).totalIncomes),1),e[1]||(e[1]=_(" টাকা "))]),t("div",Dt,[e[2]||(e[2]=t("span",{class:"hidden md:inline"},"আজকের",-1)),e[3]||(e[3]=t("span",null,"ব্যয়:",-1)),t("b",null,s(x(r).totalExpenses),1),e[4]||(e[4]=_(" টাকা "))]),t("div",{class:S(x(r).profit>=0?"text-green-600":"text-red-600")},[e[5]||(e[5]=t("span",{class:"hidden md:inline"},"আজকের",-1)),e[6]||(e[6]=_(" উদ্বৃত্ত: ")),t("b",null,s(x(r).profit),1),e[7]||(e[7]=_(" টাকা "))],2)])],2))}},Vt={class:"flex flex-wrap justify-between items-center"},Mt={class:"text-lg space-x-1"},jt={class:"flex-in justify-end"},Lt={class:"overflow-x-auto"},Ot={class:"grid grid-cols-24 gap-1 lg:gap-1.5 min-w-max pt-8"},Tt={class:"flex flex-col gap-2 justify-center items-center absolute left-0 right-0 top-0 bottom-0 z-20 text-[10px] lg:text-xs"},Bt={class:"-rotate-90"},Ht={class:"-rotate-90"},It={class:"absolute bottom-full left-0 right-0 w-full text-center text-xs pb-1"},Ft={__name:"TodayHourlyVisitorCartVue",setup($){const r=new Date().toISOString().split("T")[0],d=v(r),y=v(120),u=Y();k(async()=>{await l()});const l=async()=>{await u.fetchTrackStats({date:d.value})},e=A(()=>Math.max(...u.hourlyStats.map(m=>m.visits))),f=m=>{const o=u.hourlyStats.find(c=>c.hour===m);return!o||!e.value?0:Math.round(y.value*(o.visits/e.value))},h=m=>{const o=u.hourlyStats.find(c=>c.hour===m);return!o||!e.value?0:o.visits},w=m=>{const o=m>=12?"PM":"AM";return`${m%12===0?12:m%12} ${o}`};return(m,o)=>(i(),p("div",{class:S(["card-bg p-4 md:p-8",{"animate-pulse":x(u).loading}])},[t("div",Vt,[t("div",Mt,[o[1]||(o[1]=t("b",null,"*",-1)),t("span",null,s(x(r)===d.value?"আজকের":`${d.value} এর `),1),o[2]||(o[2]=t("span",null,"ইউনিক ভিজিটর: ",-1)),t("b",null,s(x(u).totalVisitsToday),1),o[3]||(o[3]=_(" জন। ")),o[4]||(o[4]=t("span",null,"প্রতি ঘন্টায় ভিজিটর:",-1))]),t("div",jt,[z(t("input",{type:"date","onUpdate:modelValue":o[0]||(o[0]=c=>d.value=c),class:"w-[220px] text-sm md:text-base pt-1 py-0 input-1",onInput:l},null,544),[[R,d.value]])])]),t("div",Lt,[t("div",Ot,[(i(),p(V,null,P(24,c=>t("div",{key:c},[t("div",{class:"border w-full relative min-w-[38px] content-center rounded",style:N({height:`${y.value}px`})},[t("div",Tt,[t("div",Bt,s(w(c!=24?c:0)),1),o[5]||(o[5]=t("div",{class:"rotate-90"},"-",-1)),t("div",Ht,s(w(c-1)),1)]),t("div",It,s(h(c-1)),1),t("div",{class:"absolute bottom-0 left-0 right-0 w-full bg-sky-600/70 rounded",style:N({height:`${f(c-1)}px`})},null,4)],4)])),64))])])],2))}},Nt={class:"my-container space-y-8"},At={class:"card-bg p-4 md:px-8"},Pt={class:"flex items-center justify-between gap-4"},zt={class:"shrink-0 grow-0"},Rt={class:"title-md text-sm md:text-3xl space-x-2"},Ut={class:"title-md text-sm md:text-3xl space-x-2"},Wt={__name:"DashBoard",setup($){const r=q(),d=v(!1);k(async()=>{await y()});const y=async(u=!1)=>{d.value=!0,(!r.user||u)&&await r.fetchUser(),d.value=!1};return(u,l)=>(i(),p("div",Nt,[t("div",At,[t("div",Pt,[t("div",zt,[t("button",{onClick:l[0]||(l[0]=e=>y(!0)),type:"button",class:"btn-3 space-x-1 py-1"},l[1]||(l[1]=[t("i",{class:"fas fa-sync text-lg"},null,-1),t("span",{class:"hidden md:inline text-base pt-1"}," Reload ",-1)]))]),x(r).user?(i(),p("div",{key:0,class:S(["shrink grow flex flex-wrap justify-end gap-x-4 md:text-2xl md:pt-1.5",{"animate-pulse opacity-50":d.value}])},[t("p",Rt,[l[2]||(l[2]=t("i",{class:"fas fa-user-circle text-gray-400"},null,-1)),t("span",null,s(x(r).user.name),1)]),t("p",Ut,[l[3]||(l[3]=t("i",{class:"fas fa-phone-alt text-gray-400"},null,-1)),t("span",null,s(x(r).user.phone),1)])],2)):g("",!0)])]),d.value?g("",!0):(i(),C(Ct,{key:0})),d.value?g("",!0):(i(),C(Ft,{key:1})),d.value?g("",!0):(i(),C(St,{key:2}))]))}};export{Wt as default};
