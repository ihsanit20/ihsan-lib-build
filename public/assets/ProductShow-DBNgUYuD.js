import{u as M}from"./product-ysosN2UT.js";import{u as O}from"./category-DyLxZw5J.js";import{r as n,e as T,c as a,a as e,g as D,h as E,m as G,s as H,i as _,t as i,j as u,F as b,q as h,k as J,l as K,o,d as Q}from"./index-DnFlqQxg.js";import{L as W}from"./LoaderView-8hQBSh-6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"my-container space-y-4"},Y={class:"flex justify-between gap-4"},Z={key:1,class:"grid md:grid-cols-3 md:gap-8 gap-4 bg-white shadow rounded-lg p-6"},ee={class:"space-y-4 flex flex-col items-center"},te={class:"relative w-full flex items-center justify-center"},le={for:"photo-input",class:"flex w-full cursor-pointer"},se=["src"],oe={class:"flex justify-center"},ae={key:1,class:"btn-2 opacity-50 cursor-not-allowed",disabled:""},ie={class:"md:flex hidden"},ne={class:"flex flex-col items-center gap-2"},de=["src"],re={class:"md:col-span-2 grid gap-4"},ue={class:"title-lg"},ce={class:"flex gap-2 text-sm"},pe={class:""},fe={class:""},me={class:"list-disc list-inside"},ve={class:"list-disc list-inside"},ge={class:"text-lg font-semibold"},_e={class:"text-lg font-semibold"},be={class:"text-gray-700"},he={class:"flex md:hidden"},xe={class:"flex flex-col items-center gap-2"},ye=["src"],Se={__name:"ProductShow",setup(ke){const c=M();O();const $=J();Q();const m=$.params.id,l=n(null),x=n(null),v=n(null),p=n(null),r=n(!1),f=n(!1),g=n(!1),q=d=>{const t=d.target.files[0];t&&(p.value=t,f.value=!0,x.value=URL.createObjectURL(t))},z=async()=>{if(!(!p.value||!l.value))try{r.value=!0,await c.uploadPhoto(l.value.id,p.value),p.value=null,f.value=!1}catch(d){console.error("Failed to upload photo:",d)}finally{r.value=!1,await c.fetchProduct(m)}};T(async()=>{try{g.value=!0,await c.fetchProduct(m),l.value=c.product}catch(d){console.error("Failed to fetch product:",d)}finally{g.value=!1}});const A=()=>{v.value&&v.value.click()};return(d,t)=>{var k,w,B,L,N,P,S,C,I,R,F,U,j,V;const y=K("RouterLink");return o(),a("div",X,[e("div",Y,[D(y,{to:{name:"ProductList"},class:"btn-3"},{default:E(()=>t[0]||(t[0]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),_:1}),t[2]||(t[2]=e("h1",{class:"title-md md:title-xl flex-wrap text-center"},"পণ্য বিস্তারিত",-1)),D(y,{to:{name:"ProductEdit",params:{id:G(m)}},class:"btn-2"},{default:E(()=>t[1]||(t[1]=[e("i",{class:"far fa-edit"},null,-1),e("span",{class:"hidden md:flex"},"এডিট",-1)])),_:1},8,["to"])]),g.value?(o(),H(W,{key:0})):(o(),a("div",Z,[e("div",ee,[e("div",te,[e("label",le,[e("img",{src:x.value||((k=l.value)==null?void 0:k.photo),alt:"Photo",class:"rounded-md w-full object-cover"},null,8,se)]),e("input",{id:"photo-input",ref_key:"fileInputRef",ref:v,type:"file",accept:"image/*",class:"hidden",onChange:q},null,544),!f.value&&!r.value?(o(),a("button",{key:0,onClick:A,class:"btn-icon absolute top-4 right-4 cursor-pointer opacity-50 hover:opacity-100 z-10"},t[3]||(t[3]=[e("i",{class:"fas fa-camera"},null,-1)]))):_("",!0)]),e("div",oe,[f.value&&!r.value?(o(),a("button",{key:0,class:"btn-2",onClick:z}," Upload Photo ")):_("",!0),r.value?(o(),a("button",ae," Uploading... ")):_("",!0)]),e("div",ie,[e("div",ne,[e("img",{src:`data:image/png;base64,${(w=l.value)==null?void 0:w.barcode_image}`,alt:"Barcode Image"},null,8,de),e("p",null,i((B=l.value)==null?void 0:B.barcode),1)])])]),e("div",re,[e("h1",ue,i((L=l.value)==null?void 0:L.name),1),e("div",ce,[e("p",pe,[t[4]||(t[4]=e("b",null,"খুচরা মূল্য:",-1)),u(" "+i(Number((N=l.value)==null?void 0:N.mrp).toLocaleString("bn-BD"))+" টাকা ",1)]),t[6]||(t[6]=u(" | ")),e("p",fe,[t[5]||(t[5]=e("b",null,"বিক্রয় মূল্য:",-1)),u(" "+i(Number((P=l.value)==null?void 0:P.selling_price).toLocaleString("bn-BD"))+" টাকা ",1)])]),e("div",null,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold"},"লেখক ও অনুবাদক:",-1)),e("ul",me,[(o(!0),a(b,null,h((S=l.value)==null?void 0:S.authors,s=>(o(),a("li",{key:s.id},i(s==null?void 0:s.name)+" (লেখক)",1))),128)),(o(!0),a(b,null,h((C=l.value)==null?void 0:C.translators,s=>(o(),a("li",{key:s.id},i(s==null?void 0:s.name)+" (অনুবাদক) ",1))),128))])]),e("div",null,[t[8]||(t[8]=e("h2",{class:"text-lg font-semibold"},"ক্যাটাগরি:",-1)),e("ul",ve,[(o(!0),a(b,null,h((I=l.value)==null?void 0:I.categories,s=>(o(),a("li",{key:s},i(s),1))),128))])]),e("p",ge,[t[9]||(t[9]=e("b",null,"স্টক:",-1)),u(" "+i(Number((R=l.value)==null?void 0:R.available_stock).toLocaleString("bn-BD"))+" টি ",1)]),e("p",_e,[t[10]||(t[10]=e("b",null,"ISBN:",-1)),u(" "+i(((F=l.value)==null?void 0:F.ISBN)||"N/A"),1)]),e("div",null,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold"},"বিস্তারিত:",-1)),e("p",be,i(((U=l.value)==null?void 0:U.description)||"No description available."),1)]),e("div",he,[e("div",xe,[e("img",{src:`data:image/png;base64,${(j=l.value)==null?void 0:j.barcode_image}`,alt:"Barcode Image"},null,8,ye),e("p",null,i((V=l.value)==null?void 0:V.barcode),1)])])])]))])}}};export{Se as default};
